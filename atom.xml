<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ZhangAo`s Blog</title>
  
  <subtitle>ZhangAo`s Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.imzhangao.com/"/>
  <updated>2018-10-04T13:51:47.575Z</updated>
  <id>https://www.imzhangao.com/</id>
  
  <author>
    <name>[object Object]</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Python Scrapy爬虫爬取抖音指定用户所有作品</title>
    <link href="https://www.imzhangao.com/2018/10/02/Python%20Scrapy%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96%E6%8A%96%E9%9F%B3%E6%8C%87%E5%AE%9A%E7%94%A8%E6%88%B7%E6%89%80%E6%9C%89%E4%BD%9C%E5%93%81/"/>
    <id>https://www.imzhangao.com/2018/10/02/Python Scrapy爬虫爬取抖音指定用户所有作品/</id>
    <published>2018-10-02T07:43:40.277Z</published>
    <updated>2018-10-04T13:51:47.575Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><h6 id="分析过程"><a href="#分析过程" class="headerlink" title="分析过程"></a>分析过程</h6><blockquote><p>   刚开始本来要写爬那种正常给我们看的那种随机的视频的，但是后面抓包发现，他有5个必不可少的参数，而且链接都是访问几次或者时间过一会就会失效的，只能更换这5个参数再继续访问，可是通过反编译他的apk包发现只能推出他里面的两个参数，都是时间，但是两个是以不同的方式获取的时间，一个是10位数的，一个是13位数的。还有三个参数是通过其他方式加密的，由于本人对于反编译不是很精通，就没有分析出来，但是网上分析出来的人也很少，很多人分析到要用到两个key值加密时就放弃了，说是怕泄露了人家的商业机密，还有个别大佬，直接将分析出来的东西放在服务器上，然后做个接口给别人卖。我就放弃了爬这种随机的视频，后面就转去爬指定的用户的全部视频，我看了下，网上有很多教程，但是失效的也很多，而且我看用scrapy框架的也很少，所以我当复习下scrapy框架的知识的想法，就给大家写了一个。首先抓了下个人界面的链接发现还是要那5个参数的，然后在个人界面又发现了分享个人名片，以链接的形式，打开这个链接能发现个人的视频都在这里面，就从这里下手，点击它的视频是可以播放的说明视频链接就在这里面（这就比较好办了），调试一下发现它视频的链接在一个json列表列表里面，该列表也是要访问链接来获取的，不过大家懂的，该链接肯定又会有加密参数，不过js的加密的话还是可以分析的，首先就是user_id参数，这个看名字就知道是用户的id，这个在网页最下方的js里面就有，还有个dytk参数，界面里面也有，max_cursor参数刚开始是0，主要是用来判断是否下拉后还有视频，最后一个参数是_signature，这个参数是通过js加密出来的，全局搜索这个参数，发现是__M.require(“douyin_falcon:node_modules/byted-acrawler/dist/runtime”)里面出来的，其实此时你就可以在控制台获取到了<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysignature = __M.require(&quot;douyin_falcon:node_modules/byted-acrawler/dist/runtime&quot;)</span><br><span class="line">signaturelog = mysignature.sign(user_id)</span><br><span class="line">console.log(signaturelog)</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>在控制台就能显示_signature参数了，再往下你可以将加密的js提取出来，继续全局搜索__M就能看见t.__M.define = n,t.__M.require = e这代码的时候你就找到了，将这个js内容拷贝出来（提取关键内容也可以），然后和刚开始获取到的__M.define(“douyin_falcon:node_modules/byted-acrawler/dist/runtime”,function(l,e){…放在一个HTML文件中，再将上面的控制台语句也加进去，打开该文件你就能在控制台看到参数了，当然你也可以将这些东西处理成一个js文件，然后用node去执行，为了程序的方便我就用一位大佬的js文件来写我的代码了（时间有限，没有做自己的js），参数都齐全了之后，将这些参数拼接成链接去直接访问的话，还是得不到，必须以手机头部信息去访问，所以将chrome浏览器调试的时候选择成手机就可以访问到了，到此就结束了分析部分，可以动手写代码了。</p></blockquote><h1 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h1><blockquote><p>在抖音的个人主页，点击右上角的菜单，然后点击分享个人名片，然后选择以链接形式分享到微信或者QQ，然后复制该链接到爬虫文件夹的url_list.txt文件中，如果要爬取多人的，每个链接换行就好了。</p></blockquote><h1 id="程序源码"><a href="#程序源码" class="headerlink" title="程序源码"></a>程序源码</h1><h5 id="爬虫文件-douyinvideo-py"><a href="#爬虫文件-douyinvideo-py" class="headerlink" title="爬虫文件 douyinvideo.py"></a>爬虫文件 douyinvideo.py</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">import scrapy</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import os</span><br><span class="line">import json</span><br><span class="line">from scrapy.utils.project import get_project_settings</span><br><span class="line">class DouyinvideoSpider(scrapy.Spider):</span><br><span class="line">    name = &apos;douyinvideo&apos;</span><br><span class="line">    allowed_domains = [&apos;http://v.douyin.com&apos;,&apos;https://www.iesdouyin.com&apos;,&apos;https://www.amemv.com&apos;,&apos;http://*.ixigua.com&apos;,]</span><br><span class="line">    # get_json_url = &quot;https://www.amemv.com/aweme/v1/aweme/post/?&#123;0&#125;&quot;#获取json数据的链接，有的链接已经失效。</span><br><span class="line">    # new_ie_url = &quot;https://www.douyin.com/aweme/v1/aweme/favorite/?&#123;0&#125;&quot;</span><br><span class="line">    new_ie_url = &quot;https://www.iesdouyin.com/aweme/v1/aweme/post/?&#123;0&#125;&quot;</span><br><span class="line">    # url = &quot;http://v.douyin.com/dXUNSp/&quot;#有的人说短链接会重定向到长链接，但scrapy会自动重定向的</span><br><span class="line">    url_num = 1 # 定位url的数目</span><br><span class="line">    start_urls = []</span><br><span class="line">    url_file = open(&quot;url_list.txt&quot;, &apos;rU&apos;) # 取文件中的第一个url</span><br><span class="line">    try:</span><br><span class="line">        for line in url_file:</span><br><span class="line">            start_urls.append(line.rstrip(&apos;\n&apos;))</span><br><span class="line">            break</span><br><span class="line">    finally:</span><br><span class="line">        url_file.close()</span><br><span class="line">    uid = None</span><br><span class="line">    dytk = None</span><br><span class="line">    video_link_arr = []</span><br><span class="line">    video_title_arr = []</span><br><span class="line">    def_max_cursor = &apos;0&apos;</span><br><span class="line">    _signature = &apos;&apos;</span><br><span class="line">    video_num = 1</span><br><span class="line">    def parse(self, response):</span><br><span class="line">        self.uid = None</span><br><span class="line">        self.dytk = None</span><br><span class="line">        self.video_link_arr = []</span><br><span class="line">        self.video_title_arr = []</span><br><span class="line">        self.def_max_cursor = &apos;0&apos;</span><br><span class="line">        self._signature = &apos;&apos;</span><br><span class="line">        self.video_num = 1</span><br><span class="line">        self.uid = str(re.findall(&apos;uid: &quot;(.*)&quot;&apos;,response.text)[0])</span><br><span class="line">        self.dytk = re.findall(&quot;dytk: &apos;(.*)&apos;&quot;,response.text)</span><br><span class="line">        self._signature = self.get_signature(self.uid)</span><br><span class="line">        parms = self.get_parms(self.uid,self._signature,self.dytk[0],self.def_max_cursor)</span><br><span class="line">        new_url = self.get_newurl(self.new_ie_url,parms)</span><br><span class="line">        yield response.follow(new_url,callback = self.get_json,dont_filter=True,headers = get_project_settings().get(&apos;DEFAULT_REQUEST_HEADERS&apos;))#filter=True 不去重/第一次探测start_url是否失效</span><br><span class="line"></span><br><span class="line">    def get_json(self,response):</span><br><span class="line">        _json = json.loads(response.text)</span><br><span class="line">        if not _json[&apos;aweme_list&apos;]:</span><br><span class="line">            parms = self.get_parms(self.uid, self._signature, self.dytk[0],self.def_max_cursor)</span><br><span class="line">            new_url = self.get_newurl(self.new_ie_url, parms)</span><br><span class="line">            yield response.follow(new_url,callback = self.get_json,dont_filter=True,headers = get_project_settings().get(&apos;DEFAULT_REQUEST_HEADERS&apos;))#死循环访问链接，测试中总有一次会返回正确的json数据</span><br><span class="line">        else:</span><br><span class="line">            #获取到了第一批json数据</span><br><span class="line">            for _jsons in _json[&apos;aweme_list&apos;]:</span><br><span class="line">                print(&quot;正在获取抖音号%s的第%s条video数据........&quot;%(self.uid,self.video_num))</span><br><span class="line">                self.video_num += 1</span><br><span class="line">                self.video_title_arr.append(_jsons[&apos;share_info&apos;][&apos;share_desc&apos;])</span><br><span class="line">                true_file_link = self.true_file_link(_jsons[&apos;video&apos;][&apos;play_addr&apos;][&apos;url_list&apos;][0])</span><br><span class="line">                self.video_link_arr.append(true_file_link)</span><br><span class="line">            if _json[&apos;has_more&apos;]:</span><br><span class="line">                #翻页视频</span><br><span class="line">                self.def_max_cursor = str(_json[&apos;max_cursor&apos;])</span><br><span class="line">                parms = self.get_parms(self.uid,self._signature,self.dytk[0],self.def_max_cursor)</span><br><span class="line">                new_url = self.get_newurl(self.new_ie_url, parms)</span><br><span class="line">                yield response.follow(new_url, callback=self.get_json, dont_filter=True,headers=get_project_settings().get(&apos;DEFAULT_REQUEST_HEADERS&apos;))</span><br><span class="line">            else:#提交视频链接以及标题和用户id</span><br><span class="line">                yield &#123;</span><br><span class="line">                    &apos;user_id&apos;:self.uid,</span><br><span class="line">                    &apos;file_name&apos;:self.video_title_arr,</span><br><span class="line">                    &apos;file_link&apos;:self.video_link_arr</span><br><span class="line">                &#125;</span><br><span class="line">                next_url = self.next_url()</span><br><span class="line">                if next_url:</span><br><span class="line">                    yield response.follow(next_url, callback=self.parse, dont_filter=True,headers=get_project_settings().get(&apos;DEFAULT_REQUEST_HEADERS&apos;))</span><br><span class="line">                else:</span><br><span class="line">                    pass</span><br><span class="line"></span><br><span class="line">    def get_signature(self,user_id):#获取signature参数</span><br><span class="line">        user_id = str(user_id)</span><br><span class="line">        _signature = os.popen(&apos;node _signature.js %s&apos; % user_id)</span><br><span class="line">        _signature = _signature.readlines()[0]</span><br><span class="line">        _signature = _signature.replace(&quot;\n&quot;, &quot;&quot;)</span><br><span class="line">        _signature = str(_signature)</span><br><span class="line">        return _signature</span><br><span class="line"></span><br><span class="line">    def get_parms(self,user_id,_signature,dytk,max_cursor):#获取链接参数表</span><br><span class="line">        parms = &#123;  # 参数字典</span><br><span class="line">            &apos;user_id&apos;: user_id,</span><br><span class="line">            &apos;count&apos;: &apos;21&apos;,</span><br><span class="line">            &apos;max_cursor&apos;: max_cursor,</span><br><span class="line">            &apos;aid&apos;: &apos;1128&apos;,</span><br><span class="line">            &apos;_signature&apos;: _signature,</span><br><span class="line">            &apos;dytk&apos;: dytk</span><br><span class="line">        &#125;</span><br><span class="line">        return parms</span><br><span class="line"></span><br><span class="line">    def get_newurl(self,url,parms):#url组合</span><br><span class="line">        new_url = url.format(&apos;&amp;&apos;.join([Key + &apos;=&apos; + parms[Key] for Key in parms]))</span><br><span class="line">        return new_url</span><br><span class="line"></span><br><span class="line">    def true_file_link(self,url):#解决video的跳转链接</span><br><span class="line">        r = requests.get(url,headers = get_project_settings().get(&apos;DEFAULT_REQUEST_HEADERS&apos;),allow_redirects = False)</span><br><span class="line">        return r.headers[&apos;Location&apos;]</span><br><span class="line">    def next_url(self):# 取一条没有被爬取过的链接</span><br><span class="line">            url_file = open(&quot;url_list.txt&quot;, &apos;rU&apos;)</span><br><span class="line">            try:</span><br><span class="line">                for (line,num) in zip(url_file,range(self.url_num+1)):</span><br><span class="line">                    if num == self.url_num:</span><br><span class="line">                        self.url_num += 1</span><br><span class="line">                        return line.rstrip(&apos;\n&apos;)</span><br><span class="line"></span><br><span class="line">                    else:</span><br><span class="line">                        continue</span><br><span class="line">            finally:</span><br><span class="line">                url_file.close()</span><br></pre></td></tr></table></figure><h5 id="设置文件-settings-py-（我只写我添加的设置，其他设置不变就好）"><a href="#设置文件-settings-py-（我只写我添加的设置，其他设置不变就好）" class="headerlink" title="设置文件 settings.py （我只写我添加的设置，其他设置不变就好）"></a>设置文件 settings.py （我只写我添加的设置，其他设置不变就好）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">VIDEO_DIR = &apos;E:/Python/myScrapyProject/douyin/video/&apos;#下载文件的保存路径</span><br><span class="line">DEFAULT_REQUEST_HEADERS = &#123;</span><br><span class="line">  &apos;accept-encoding&apos;: &apos;gzip, deflate, br&apos;,</span><br><span class="line">  &apos;accept-language&apos;: &apos;zh-CN,zh;q=0.9&apos;,</span><br><span class="line">  &apos;pragma&apos;: &apos;no-cache&apos;,</span><br><span class="line">  &apos;cache-control&apos;: &apos;no-cache&apos;,</span><br><span class="line">  &apos;upgrade-insecure-requests&apos;: &apos;1&apos;,</span><br><span class="line">  &apos;user-agent&apos;: &quot;Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1&quot;,</span><br><span class="line">&#125;#请求链接的头设置</span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   &apos;douyin.pipelines.DouyinPipeline&apos;: 300,</span><br><span class="line">&#125;#开启ITEM_PIPELINES</span><br></pre></td></tr></table></figure><h5 id="itmes-py"><a href="#itmes-py" class="headerlink" title="itmes.py"></a>itmes.py</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user_id = scrapy.Field()</span><br><span class="line">file_name = scrapy.Field()</span><br><span class="line">file_link = scrapy.Field()</span><br></pre></td></tr></table></figure><h5 id="pipelines-py-数据存储以及视频下载"><a href="#pipelines-py-数据存储以及视频下载" class="headerlink" title="pipelines.py (数据存储以及视频下载)"></a>pipelines.py (数据存储以及视频下载)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line">from scrapy.utils.project import get_project_settings</span><br><span class="line">import os</span><br><span class="line">import re</span><br><span class="line">class DouyinPipeline(object):</span><br><span class="line">    def process_item(self, item, spider):</span><br><span class="line">        # print(item[&apos;user_id&apos;],item[&apos;file_name&apos;],item[&apos;file_link&apos;])</span><br><span class="line">        if_mkdir = os.path.exists(get_project_settings().get(&apos;VIDEO_DIR&apos;)+item[&apos;user_id&apos;])#判断目录是否存在</span><br><span class="line">        if not if_mkdir:</span><br><span class="line">            os.makedirs(get_project_settings().get(&apos;VIDEO_DIR&apos;)+item[&apos;user_id&apos;])#创建目录</span><br><span class="line">        def callbackfunc(blocknum, blocksize, totalsize):</span><br><span class="line">            percent = 100.0 * blocknum * blocksize / totalsize</span><br><span class="line">            if percent &gt; 100:</span><br><span class="line">                percent = 100</span><br><span class="line">                num = int(percent)</span><br><span class="line">                print(&apos;\r&apos; + &quot;[&quot; + &quot;#&quot; * num + &quot;]&quot; + &quot;%.2f%%&quot; % percent)</span><br><span class="line">            else:</span><br><span class="line">                num = int(percent)</span><br><span class="line">                print( &apos;\r&apos;+&quot;[&quot;+&quot;#&quot;*num+&quot;]&quot;+&quot;%.2f%%&quot; % percent,end=&quot;&quot;)</span><br><span class="line">        num = 1</span><br><span class="line">        for (name,link) in zip(item[&apos;file_name&apos;],item[&apos;file_link&apos;]):</span><br><span class="line">            #/ \ : * &quot; &lt; &gt; | ？windows文件名中不能包含这些字符</span><br><span class="line">            name = re.sub(&apos;[/\:*&quot;&lt;&gt;|?]&apos;,&apos;&apos;,name)</span><br><span class="line">            print(&quot;开始下载抖音号为%s第%s/%s文件-&gt;%s%s&quot;%(item[&apos;user_id&apos;],num,len(item[&apos;file_name&apos;]),&quot;\t&quot;,name))</span><br><span class="line">            a, b = urllib.request.urlretrieve(link,get_project_settings().get(&apos;VIDEO_DIR&apos;) + item[&apos;user_id&apos;] + &quot;/&quot; + str(num) +&quot;-&quot;+ name + &quot;.mp4&quot;, callbackfunc)</span><br><span class="line">            num += 1</span><br><span class="line">        print(&quot;\n&quot; + &quot;抖音号为%s的视频已全部下载完成！&quot;%(item[&apos;user_id&apos;]))</span><br><span class="line">        return item</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h1&gt;&lt;h6 id=&quot;分析过程&quot;&gt;&lt;a href=&quot;#分析过程&quot; class=&quot;headerlink&quot; title=&quot;分析过程&quot;&gt;&lt;/a
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
      <category term="Scrapy" scheme="https://www.imzhangao.com/tags/Scrapy/"/>
    
      <category term="爬虫" scheme="https://www.imzhangao.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Python破解百度云限速</title>
    <link href="https://www.imzhangao.com/2018/09/03/Python%E7%A0%B4%E8%A7%A3%E7%99%BE%E5%BA%A6%E4%BA%91%E9%99%90%E9%80%9F/"/>
    <id>https://www.imzhangao.com/2018/09/03/Python破解百度云限速/</id>
    <published>2018-09-03T10:16:03.251Z</published>
    <updated>2018-09-03T12:56:59.213Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、破解百度云的网页大文件下载限制"><a href="#一、破解百度云的网页大文件下载限制" class="headerlink" title="一、破解百度云的网页大文件下载限制"></a>一、破解百度云的网页大文件下载限制</h1><blockquote><p>百度云网页下载大文件会让你打开客服端下载，网页不提供下载链接，以前有一个“一行js代码破解百度云大文件下载限制”的方法，有大佬还用这个BUG做了Chrome浏览器的插件，但是百度云更新后就将该BUG修复了，所以现在这个方法用不了了，插件也就用不了了。</p></blockquote><blockquote><p>我们就只能用最原始的方法也是最好用的方法来获取它大文件的下载链接。</p></blockquote><blockquote><p>首先打开网页百度云，然后登陆进去</p></blockquote><blockquote><p>然后按F12打开开发者工具，然后选中里面的Network，然后选择它下面的All</p></blockquote><p><img src="/img/baiduyun1.png"></p><blockquote><p>然后按F5刷新界面，你就会看见下面的Network里面多了很多东西比如ajax请求等等，当加载到如下图中那个js时应该就加载完了</p></blockquote><p><img src="/img/baiduyun2.png"></p><blockquote><p>然后不要关开发者界面，在上面的网页中点击下载你要下载的资源</p></blockquote><p><img src="/img/baiduyun3.png"></p><blockquote><p>然后你就会发现Network里面又刷新了几个ajax，然后找到下图中download开头的那个ajax请求</p></blockquote><p><img src="/img/baiduyun4.png"></p><blockquote><p>然后点击它，右边就有他返回的数据，展开就能看到一个dlink，dlink里的链接就是我们的文件下载链接</p></blockquote><p><img src="/img/baiduyun5.png"></p><blockquote><p>最后将链接复制到浏览器地址窗口或者迅雷里面就可以下载了</p></blockquote><p><img src="/img/baiduyun6.png"></p><h1 id="二、百度云下载限速破解"><a href="#二、百度云下载限速破解" class="headerlink" title="二、百度云下载限速破解"></a>二、百度云下载限速破解</h1><blockquote><p>这个方法的原文章链接我找不见了，只有代码还在，先说一下代码的原理，首先在链接的头里面分析该资源的大小，然后将大小分割成线程块（开多少个多线程就分割成多少个块），然后将每个线程里分到的块写到该块的指定位置。首先python的多线程有GIL，所以我测试的时候10M大小的文件100个线程速度最快，下面是我测试的结果，你可以将上面获取到的链接放进来就可以下载了。</p></blockquote><blockquote><p>这是测试资源在浏览器以及客服端的下载速度</p></blockquote><p><img src="/img/bdyxs1.png"><br><img src="/img/bdyxs2.png"></p><blockquote><p>然后这是该程序下载的速度（相同的资源)</p></blockquote><p><img src="/img/bdyxs3.png"></p><blockquote><p>对下载下来的文件MD5对比</p></blockquote><p><img src="/img/bdyxs4.png"></p><blockquote><p>前两个是浏览器和客服端下载的，最后一个是该程序下载的，为啥不一样呢，前两个都是将资源直接下载下来，而该程序是分析链接头然后根据文件的名字新建一个文件，然后在往里面写入数据，当然MD5就不一样啦。但是三个文件打开，里面的资源没有一点问题，都能正常打开使用。</p></blockquote><p><img src="/img/bdyxs5.png"></p><h1 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">import os</span><br><span class="line">import win32api</span><br><span class="line">import time</span><br><span class="line">import multiprocessing</span><br><span class="line">from multiprocessing import Process</span><br><span class="line">from tqdm import tqdm</span><br><span class="line">import tkinter</span><br><span class="line">import tkinter.messagebox</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import threading</span><br><span class="line">j = 0</span><br><span class="line">url = &quot;下载链接填在这里&quot;</span><br><span class="line">head = requests.head(url)</span><br><span class="line">size = int(head.headers[&quot;Content-Length&quot;])</span><br><span class="line">filename = head.headers[&quot;Content-Disposition&quot;]</span><br><span class="line">print(head.headers)</span><br><span class="line">n = 100</span><br><span class="line">spos = []</span><br><span class="line">fpos = []</span><br><span class="line">persize = int(size/n)</span><br><span class="line">intsize = persize*n</span><br><span class="line">for i in range(0,intsize,persize):</span><br><span class="line">    spos.append(i)</span><br><span class="line">    fpos.append(i+persize-1)</span><br><span class="line">if persize &lt; intsize:</span><br><span class="line">    fpos[n-1] = size</span><br><span class="line">fl = re.compile(r&apos;filename=(.*)&apos;, re.S)</span><br><span class="line">filename = fl.findall(filename)</span><br><span class="line">filename = filename[0]</span><br><span class="line">fp = open(filename,&quot;wb&quot;)</span><br><span class="line">fp.close()</span><br><span class="line">fp = open(filename,&quot;rb+&quot;)</span><br><span class="line">tmp = []</span><br><span class="line">strat_time = time.time()</span><br><span class="line">def readfilesizez(filename):</span><br><span class="line">    while True:</span><br><span class="line">        downsize = os.path.getsize(filename)</span><br><span class="line">        print(downsize)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">def downfile(url,spos,fpos,fp):</span><br><span class="line">    global j</span><br><span class="line">    head = &#123;&#125;</span><br><span class="line">    head[&quot;Range&quot;] = &quot;bytes=%d-%d&quot; % (spos,fpos)</span><br><span class="line">    res = requests.get(url,headers=head)</span><br><span class="line">    fp.seek(spos)</span><br><span class="line">    fp.write(res.content)</span><br><span class="line">    j+=1</span><br><span class="line">    print(j)</span><br><span class="line"># t1 = threading.Thread(target=readfilesizez, args=(filename,))</span><br><span class="line"># t1.start()</span><br><span class="line">for i in range(0,n):</span><br><span class="line">    t = threading.Thread(target=downfile, args=(url,spos[i],fpos[i],fp))</span><br><span class="line">    t.setDaemon(True)</span><br><span class="line">    t.start()</span><br><span class="line">    tmp.append(t)</span><br><span class="line">for i in tmp:</span><br><span class="line">    i.join()</span><br><span class="line">fp.close()</span><br><span class="line">close_time = time.time()</span><br><span class="line">speed = float(size)/(1000.0*(close_time-strat_time))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&quot;spend time: %0.2f s&quot; % float(close_time-strat_time))</span><br><span class="line">print(&quot;finished... average speed: %0.2f KB/s&quot; % speed)</span><br><span class="line"># print(spos)</span><br><span class="line"># print(fpos)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、破解百度云的网页大文件下载限制&quot;&gt;&lt;a href=&quot;#一、破解百度云的网页大文件下载限制&quot; class=&quot;headerlink&quot; title=&quot;一、破解百度云的网页大文件下载限制&quot;&gt;&lt;/a&gt;一、破解百度云的网页大文件下载限制&lt;/h1&gt;&lt;blockquote&gt;

      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
      <category term="百度云" scheme="https://www.imzhangao.com/tags/%E7%99%BE%E5%BA%A6%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫爬取鬼刀的画作</title>
    <link href="https://www.imzhangao.com/2018/09/02/Python%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96%E9%AC%BC%E5%88%80%E7%9A%84%E7%94%BB%E4%BD%9C/"/>
    <id>https://www.imzhangao.com/2018/09/02/Python爬虫爬取鬼刀的画作/</id>
    <published>2018-09-02T14:00:49.107Z</published>
    <updated>2018-09-02T14:01:18.474Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>都是比较简单的内容，我就不建项目了，直接上代码了，还有大佬说为啥不用多线程，我注释里有多线程的代码，你取消注释就好了，但是我每次多线程下载到一半就出错了，所以还是用了urlretrieve安稳下载了，速度也挺快的。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line">from lxml import etree</span><br><span class="line">import re</span><br><span class="line">import threading</span><br><span class="line">def url(url):</span><br><span class="line">    header = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0;&quot;&#125;</span><br><span class="line">    requests = urllib.request.Request(url,headers=header)</span><br><span class="line">    response = urllib.request.urlopen(requests)</span><br><span class="line">    html = response.read().decode(&quot;GBK&quot;)</span><br><span class="line">    return html</span><br><span class="line">def getlink(html):</span><br><span class="line">    page = etree.HTML(html)</span><br><span class="line">    imageurl = page.xpath(u&quot;/html/body/div[@id=&apos;main&apos;]/div[@class=&apos;list&apos;]/ul/li/a/@href&quot;)</span><br><span class="line">    return imageurl</span><br><span class="line">def nextpageurl(html):</span><br><span class="line">    page = etree.HTML(html)</span><br><span class="line">    next = page.xpath(u&quot;/html/body/div[@id=&apos;main&apos;]/div[@class=&apos;page&apos;]/a&quot;)</span><br><span class="line">    allpage = len(next)</span><br><span class="line">    return allpage</span><br><span class="line">def allpageurl(num):</span><br><span class="line">    pageurllist = [&apos;http://www.netbian.com/s/wlop/index.htm&apos;,]</span><br><span class="line">    for i in range(2,num + 1):</span><br><span class="line">        url = &quot;http://www.netbian.com/s/wlop/index_&quot;+str(i)+&quot;.htm&quot;</span><br><span class="line">        pageurllist.append(url)</span><br><span class="line">    return pageurllist</span><br><span class="line">def lastimagelink(allimagelinks):</span><br><span class="line">    alldownlink = []</span><br><span class="line">    for allimagelink in allimagelinks:</span><br><span class="line">        html = url(allimagelink)</span><br><span class="line">        # page = etree.HTML(html)</span><br><span class="line">        # imagedownlink = page.xpath(u&quot;/html/body[@id=&apos;endbz&apos;]/div[@id=&apos;main&apos;]/table[@id=&apos;endimg&apos;]/tbody/tr/td/a/img/@src&quot;)</span><br><span class="line">        f = re.compile(r&apos;&lt;img src=&quot;([^\&quot;]*)&quot;&apos;, re.S)</span><br><span class="line">        imagedownlink = f.findall(html)</span><br><span class="line">        alldownlink.append(imagedownlink[1])</span><br><span class="line">    return alldownlink</span><br><span class="line">def tddown(alldownlinks):</span><br><span class="line">    tmp = []</span><br><span class="line">    i = 1</span><br><span class="line">    for alldownlink in alldownlinks:</span><br><span class="line">        downfile(alldownlink,i)</span><br><span class="line">        # print(alldownlink)</span><br><span class="line">        # t = threading.Thread(target=downfile, args=(alldownlink,i))</span><br><span class="line">        # t.setDaemon(True)</span><br><span class="line">        # t.start()</span><br><span class="line">        # tmp.append(t)</span><br><span class="line">        i += 1</span><br><span class="line">    # for i in tmp:</span><br><span class="line">    #     i.join()</span><br><span class="line">def downfile(alldownlink,i):</span><br><span class="line">    g = re.compile(r&apos;[0-9]&#123;4&#125;/([A-Za-z0-9]+\.jpg)&apos;, re.S)</span><br><span class="line">    filename = g.findall(alldownlink)</span><br><span class="line">    a,b = urllib.request.urlretrieve(alldownlink,filename[0])</span><br><span class="line">    print(&quot;第&quot;+str(i)+&quot;张图片下载成功！&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    myurl = &quot;http://www.netbian.com/s/wlop/index.htm&quot;</span><br><span class="line">    html = url(myurl)</span><br><span class="line">    allpagenum = nextpageurl(html)</span><br><span class="line">    pageurllist = allpageurl(allpagenum)</span><br><span class="line">    allimagelink = []</span><br><span class="line">    for i in pageurllist:</span><br><span class="line">        html = url(i)</span><br><span class="line">        imageurl = getlink(html)</span><br><span class="line">        for j in imageurl:</span><br><span class="line">            j = re.sub(r&apos;.htm&apos;,&quot;-1920x1080.htm&quot;,j)</span><br><span class="line">            j = &quot;http://www.netbian.com&quot; + j</span><br><span class="line">            allimagelink.append(j)</span><br><span class="line">    alldownlink = lastimagelink(allimagelink)</span><br><span class="line">    tddown(alldownlink)</span><br><span class="line">    # imageurl = getlink(html)</span><br><span class="line">    # print(imageurl)</span><br><span class="line">#http://www.netbian.com</span><br><span class="line">#-1920x1080.htm</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;都是比较简单的内容，我就不建项目了，直接上代码了，还有大佬说为啥不用多线程，我注释里有多线程的代码，你取消注释就好了，但是我每次多线程下载到一半就出错了，所以还是用了urlretrieve安稳下载了，速度也挺快的。&lt;/p&gt;
&lt;/blockquote
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
      <category term="爬虫" scheme="https://www.imzhangao.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫爬取微软官方Windows_10_ISO镜像文件</title>
    <link href="https://www.imzhangao.com/2018/09/02/Python%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96%E5%BE%AE%E8%BD%AF%E5%AE%98%E6%96%B9Windows_10_ISO%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6/"/>
    <id>https://www.imzhangao.com/2018/09/02/Python爬虫爬取微软官方Windows_10_ISO镜像文件/</id>
    <published>2018-09-02T05:12:32.000Z</published>
    <updated>2018-09-02T06:30:57.804Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简单说明"><a href="#简单说明" class="headerlink" title="简单说明"></a>简单说明</h1><blockquote><p>该爬虫没有采用Scrapy框架，只是采用简单的request+selenium以及前端可视化界面的PyQt5，如果你认为网上的系统不是很干净，MSDN里面的系统又比较的旧，没有新的版本，那你就可以尝试使用该软件，也可以优化或更改它</p></blockquote><blockquote><p>为什么要用selenium呢，我发现他官网属性里有个input标签并不是静态加载的，而是动态加载的，当然后面还有很多动态的ajax加载，但是这个input标签不一样，我分析了它的ajax全部加载项，很难发现他的value值在哪加进去的，这个value值十分重要，它将会是后面ajax请求的重要参数，所以我采用selenium配合chromedriver等他js加载完了之后再去获取界面的标签就可以了，当然可能分析js能抓到它的值，我没有详细的去看，selenium以及提供很简单的方法，并不用那么复杂。</p></blockquote><blockquote><p>后面选择语言、版本、位数选项都是采用的ajax请求去做的，我就采用简单的url拼接的方式去获取返回值，再根据返回值构建新的url，直到获取到Windows的ISO下载链接为止。</p></blockquote><blockquote><p>在这里提醒下，微软官网有访问限制，如果频繁访问的话就会返回请求不到链接的情况，这是IP屏蔽，我在界面里也加了判断，如果你获取不到请求了会提示你的，但是不用担心，就算被屏蔽了，过几个小时就又可以访问了（由于测试要不停的访问，我可是牺牲了好几个酸酸乳）</p></blockquote><blockquote><p>有大佬会问为啥不用代理，我感觉没必要，ISO获取一次就OK了，谁没事干一直获取它的链接完，你获取一个链接下载就好了</p></blockquote><blockquote><p>在下载模块这边刚开始使用了网上的有个多线程下载的方式（后面我会贴出来，可以破解百度云的下载限速），但是我发现了两点意外情况，第一点python的多线程有个全局解释器锁（GIL），有兴趣的可以百度详细去看一下，我在测试10M大小的文件时，最快下载速度是当线程开到100的时候，当你在添加线程数的话它的速度反而会下降，第二点，文件大概有4G左右大小，他这个多线程的原理就是先在链接头里获取文件的大小，然后将大小分割成线程块（几个线程就几块）然后每个线程将分配到自己的块写入指定位置，但是如果文件太大的话就算分割了还是比较的大，线程的下载速度还是很慢，如果启动太多线程就会有第一点的问题，同时线程太多也会引起很多错误，我没仔细分析错误，因为我认为自己的宽带速度才是关键，微软官网对于下载并没有限速，我用酸酸乳下载挺快的，那该多线程下载方法就只能针对限速的链接，像这种没限速的，自己的宽带速度才是关键，不管你开多少线程，网速还是那样。所以我采用了简单的下载模块urlretrieve</p></blockquote><blockquote><p>就是因为微软的服务器可能不在中国，所以下载速度很慢，挂个酸酸乳就快了，我也在界面里将获取到的链接放出来了，嫌下载慢的，可以点击复制链接，自己去其他下载器下载</p></blockquote><blockquote><p>我用的chromedriver版本是v2.41，它所支持的Chrome版本为v67-69，大家可以自行下载或者替换chromedriver与Chrome浏览器</p></blockquote><blockquote><p>前端界面采用的是Qt Creator 4.6.2 (Enterprise)和pycharm配合产生的界面，不会配置的可以百度下</p></blockquote><blockquote><p>该项目的源码以及打包后的exe文件发布在github中:<a href="https://github.com/zhangao4833/Microsoft_win10ISO" target="_blank" rel="noopener">点击此进入项目</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;简单说明&quot;&gt;&lt;a href=&quot;#简单说明&quot; class=&quot;headerlink&quot; title=&quot;简单说明&quot;&gt;&lt;/a&gt;简单说明&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;该爬虫没有采用Scrapy框架，只是采用简单的request+selenium以及前端可视化界面的
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
      <category term="爬虫" scheme="https://www.imzhangao.com/tags/%E7%88%AC%E8%99%AB/"/>
    
      <category term="Windows10" scheme="https://www.imzhangao.com/tags/Windows10/"/>
    
      <category term="微软" scheme="https://www.imzhangao.com/tags/%E5%BE%AE%E8%BD%AF/"/>
    
  </entry>
  
  <entry>
    <title>基于PHP+MySQL+bootstrap的宾馆管理系统</title>
    <link href="https://www.imzhangao.com/2018/09/01/%E5%9F%BA%E4%BA%8EPHP+MySQL+bootstrap%E7%9A%84%E5%AE%BE%E9%A6%86%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>https://www.imzhangao.com/2018/09/01/基于PHP+MySQL+bootstrap的宾馆管理系统/</id>
    <published>2018-09-01T14:20:37.211Z</published>
    <updated>2018-09-01T14:25:38.459Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>首先下面是主界面，登录后可看见，右边有对该房间状态不同所提供的不同的管理操作。</p></blockquote><p><img src="/img/binguan2.png"></p><blockquote><p>该系统做的比较的简单，只是一个简单的课程设计项目，由于时间有限，没有安全检测或者输入的即时性检测等等，有需要的可以自行添加。</p></blockquote><blockquote><p>链接数据库的相关信息在文件dblink.php文件里面</p></blockquote><blockquote><p>项目文件里还有个数据库文件ks.sql，导入进你的数据库就可以使用了。</p></blockquote><blockquote><p>关于此系统的全部源码文件以及说明文档我放在了github项目里面，<a href="https://github.com/zhangao4833/php---binguan" target="_blank" rel="noopener">点击此进入该项目</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;首先下面是主界面，登录后可看见，右边有对该房间状态不同所提供的不同的管理操作。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/img/binguan2.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;该系统做的比较的简单，只是
      
    
    </summary>
    
      <category term="PHP" scheme="https://www.imzhangao.com/categories/PHP/"/>
    
    
      <category term="PHP" scheme="https://www.imzhangao.com/tags/PHP/"/>
    
      <category term="MySQL" scheme="https://www.imzhangao.com/tags/MySQL/"/>
    
      <category term="bootstrap" scheme="https://www.imzhangao.com/tags/bootstrap/"/>
    
  </entry>
  
  <entry>
    <title>给HEXO主题skapp添加来必力评论系统</title>
    <link href="https://www.imzhangao.com/2018/08/27/%E7%BB%99HEXO%E4%B8%BB%E9%A2%98skapp%E6%B7%BB%E5%8A%A0%E6%9D%A5%E5%BF%85%E5%8A%9B%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/"/>
    <id>https://www.imzhangao.com/2018/08/27/给HEXO主题skapp添加来必力评论系统/</id>
    <published>2018-08-27T12:55:33.153Z</published>
    <updated>2018-08-27T14:06:11.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><blockquote><p>首先我去问了该主题的作者，有没有集成livere，作者回答说目前没有考虑集成livere，如果我想集成的话可以fork过去集成。也就是说作者后面仍没有想要集成livere的想法。所以我自己就分析了下代码，自己集成上了livere，这个评论系统比较的方便。其他的主题应该和这个差不了多少，如果你们的主题也没有的话，可以参考我这个方法试一下。</p></blockquote><h1 id="详细步骤"><a href="#详细步骤" class="headerlink" title="详细步骤"></a>详细步骤</h1><blockquote><p>首先注册livere，官网是  <a href="https://livere.com/" target="_blank" rel="noopener">https://livere.com/</a></p></blockquote><blockquote><p>注册后，去建立你的评论系统（进去填一下网站之类的就好了，不会的自行百度），注册后会得到一段js代码，外面是一个div包着的。</p></blockquote><blockquote><p>如下(data-uid不是“*”是一串字符，我只是给你个例子隐藏了data-uid)</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 来必力City版安装代码 --&gt;</span><br><span class="line">&lt;div id=&quot;lv-container&quot; data-id=&quot;city&quot; data-uid=&quot;**********************&quot;&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">   (function(d, s) &#123;</span><br><span class="line">       var j, e = d.getElementsByTagName(s)[0];</span><br><span class="line"></span><br><span class="line">       if (typeof LivereTower === &apos;function&apos;) &#123; return; &#125;</span><br><span class="line"></span><br><span class="line">       j = d.createElement(s);</span><br><span class="line">       j.src = &apos;https://cdn-city.livere.com/js/embed.dist.js&apos;;</span><br><span class="line">       j.async = true;</span><br><span class="line"></span><br><span class="line">       e.parentNode.insertBefore(j, e);</span><br><span class="line">   &#125;)(document, &apos;script&apos;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;noscript&gt; 为正常使用来必力评论功能请激活JavaScript&lt;/noscript&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- City版安装代码已完成 --&gt;</span><br></pre></td></tr></table></figure><blockquote><p>然后打开下面路径的文件</p></blockquote><blockquote><p>Blog\themes\hexo-theme-skapp\layout_partial\common\comment.swig</p></blockquote><blockquote><p>在里面添加如下代码</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if page.comments &amp;&amp; config.livere %&#125;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">   (function(d, s) &#123;</span><br><span class="line">       var j, e = d.getElementsByTagName(s)[0];</span><br><span class="line"></span><br><span class="line">       if (typeof LivereTower === &apos;function&apos;) &#123; return; &#125;</span><br><span class="line"></span><br><span class="line">       j = d.createElement(s);</span><br><span class="line">       j.src = &apos;https://cdn-city.livere.com/js/embed.dist.js&apos;;</span><br><span class="line">       j.async = true;</span><br><span class="line"></span><br><span class="line">       e.parentNode.insertBefore(j, e);</span><br><span class="line">   &#125;)(document, &apos;script&apos;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;noscript&gt; 为正常使用来必力评论功能请激活JavaScript&lt;/noscript&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>然后在打开下面的文件</p></blockquote><blockquote><p>Blog\themes\hexo-theme-skapp\layout_partial\post\main.swig</p></blockquote><blockquote><p>在div的结束标签&lt;/div>前添加如下代码</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if page.comments &amp;&amp; config.livere %&#125;</span><br><span class="line">    &lt;div id=&quot;lv-container&quot; data-id=&quot;city&quot; data-uid=&quot;&#123;&#123; config.livere.livere_uid &#125;&#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>如果想在其他界面比如about界面中显示来必力还要去其他界面的文件中添加上诉代码</p></blockquote><blockquote><p>最后再配置文件中添加如下代码（Blog\_config.yml）</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">livere:</span><br><span class="line">  livere_uid: ******************</span><br></pre></td></tr></table></figure><blockquote><p>该livere_uid 为你在来必力注册时给你给的代码里的data-uid</p></blockquote><blockquote><p>到此来必力就安装成功了，打开你的网站就能在文章页下面看见来必力的评论框了，要设置这个评论框的样式或者登陆方式可以登陆来必力官网进行设置。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;首先我去问了该主题的作者，有没有集成livere，作者回答说目前没有考虑集成livere，如果我想集成的话可以fo
      
    
    </summary>
    
      <category term="HEXO" scheme="https://www.imzhangao.com/categories/HEXO/"/>
    
    
      <category term="HEXO" scheme="https://www.imzhangao.com/tags/HEXO/"/>
    
      <category term="skapp" scheme="https://www.imzhangao.com/tags/skapp/"/>
    
  </entry>
  
  <entry>
    <title>Python Tkinter实现简单的校际运动会管理系统</title>
    <link href="https://www.imzhangao.com/2018/06/28/Python%20Tkinter%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%A0%A1%E9%99%85%E8%BF%90%E5%8A%A8%E4%BC%9A%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>https://www.imzhangao.com/2018/06/28/Python Tkinter实现简单的校际运动会管理系统/</id>
    <published>2018-06-28T02:40:39.619Z</published>
    <updated>2018-07-02T08:33:31.455Z</updated>
    
    <content type="html"><![CDATA[<h2 id="项目说明"><a href="#项目说明" class="headerlink" title="项目说明"></a>项目说明</h2><blockquote><p>这个项目中还是存在许多的BUG，但由于时间的问题，我只排除了部分会影响操作的BUG（不要和我说优化，我就直接没有优化）</p></blockquote><h2 id="软件截图"><a href="#软件截图" class="headerlink" title="软件截图"></a>软件截图</h2><p><img src="/img/xiaojiyundonghui1.png"></p><p><img src="/img/xiaojiyundonghui2.png"></p><p><img src="/img/xiaojiyundonghui3.png"></p><p><img src="/img/xiaojiyundonghui4.png"></p><h2 id="项目源码"><a href="#项目源码" class="headerlink" title="项目源码"></a>项目源码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line">from tkinter import messagebox, ttk</span><br><span class="line">from tkinter.ttk import Treeview</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">import pymysql</span><br><span class="line">from tkinter import *</span><br><span class="line"></span><br><span class="line">import win32gui</span><br><span class="line"></span><br><span class="line">teachername = None</span><br><span class="line">studentname = None</span><br><span class="line">adminname = None</span><br><span class="line">xiugai = 0</span><br><span class="line">#数据库连接</span><br><span class="line">def mysql(sql):</span><br><span class="line">    try:</span><br><span class="line">        conn = pymysql.connect(host=&apos;127.0.0.1&apos;, port=3306, user=&apos;root&apos;, passwd=&apos;root&apos;, db=&apos;sports_meeting&apos;, charset=&apos;utf8&apos;)</span><br><span class="line">    except:</span><br><span class="line">        messagebox.showinfo(&apos;警告&apos;,&apos;数据库链接失败！&apos;)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    cur.execute(sql)</span><br><span class="line">    redate = cur.fetchall()</span><br><span class="line"></span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">    return redate</span><br><span class="line"></span><br><span class="line"># main = Tk()</span><br><span class="line"></span><br><span class="line"># 进入消息循环</span><br><span class="line"># main.title(&quot;登录&quot;)</span><br><span class="line"># main.geometry(&apos;400x300&apos;)</span><br><span class="line"># main.resizable(width=False, height=False)</span><br><span class="line">#</span><br><span class="line"># l = Label(main, text = &quot;运动会管理系统登录&quot;,font=(&apos;&apos;,15))</span><br><span class="line"># l.pack()</span><br><span class="line"># frm = Frame(main)</span><br><span class="line"># #left</span><br><span class="line"># frm_L = Frame(frm)</span><br><span class="line"># Label(frm_L, text=&apos;账号：&apos;, font=(&apos;&apos;, 15)).pack(side=TOP)</span><br><span class="line"># frm_L.pack(side=TOP)</span><br><span class="line">#</span><br><span class="line"># #right</span><br><span class="line"># frm_R = Frame(frm)</span><br><span class="line">#</span><br><span class="line"># frm_R.pack(side=TOP)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># frm.pack()</span><br><span class="line"># main.mainloop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># def sign_to_Mofan_Python():</span><br><span class="line">#     np = new_pwd.get()</span><br><span class="line">#     npf = new_pwd_confirm.get()</span><br><span class="line">#     nn = new_name.get()</span><br><span class="line">#     with open(&apos;usrs_info.pickle&apos;, &apos;rb&apos;) as usr_file:</span><br><span class="line">#         exist_usr_info = pickle.load(usr_file)</span><br><span class="line">#     if np != npf:</span><br><span class="line">#         tk.messagebox.showerror(&apos;Error&apos;, &apos;Password and confirm password must be the same!&apos;)</span><br><span class="line">#     elif nn in exist_usr_info:</span><br><span class="line">#         tk.messagebox.showerror(&apos;Error&apos;, &apos;The user has already signed up!&apos;)</span><br><span class="line">#     else:</span><br><span class="line">#         exist_usr_info[nn] = np</span><br><span class="line">#         with open(&apos;usrs_info.pickle&apos;, &apos;wb&apos;) as usr_file:</span><br><span class="line">#             pickle.dump(exist_usr_info, usr_file)</span><br><span class="line">#         tk.messagebox.showinfo(&apos;Welcome&apos;, &apos;You have successfully signed up!&apos;)</span><br><span class="line">#         window_sign_up.destroy()</span><br><span class="line"></span><br><span class="line"># def main():</span><br><span class="line">#     window_sign_up.destroy()</span><br><span class="line">#     main = Tk()</span><br><span class="line">#     Label(main,text=&quot;hello&quot;).pack()</span><br><span class="line">#     main.mainloop()</span><br><span class="line"></span><br><span class="line">def loginyn():</span><br><span class="line">    global teachername,studentname,adminname</span><br><span class="line">    date = mysql(&quot;SELECT * FROM admin&quot;)</span><br><span class="line">    username = entry_new_name.get()</span><br><span class="line">    passwrod = entry_usr_pwd.get()</span><br><span class="line">    # if username == date[][1]:</span><br><span class="line">    if not username or not passwrod:</span><br><span class="line">        messagebox.showinfo(&apos;提示&apos;,&apos;账号密码不能为空！&apos;)</span><br><span class="line">    else:</span><br><span class="line">        upy = 0</span><br><span class="line">        for alldate in date:</span><br><span class="line">          if alldate[1] == username:</span><br><span class="line">              if alldate[2] == passwrod:</span><br><span class="line">                  upy = 1</span><br><span class="line">                  break</span><br><span class="line">              else:</span><br><span class="line">                  upy = 3</span><br><span class="line">                  break</span><br><span class="line">                  # messagebox.askokcancel(&apos;提示&apos;, &apos;密码输入错误&apos;)</span><br><span class="line">          else:</span><br><span class="line">              upy = 2</span><br><span class="line">              # messagebox.askokcancel(&apos;提示&apos;, &apos;账号输入错误&apos;)</span><br><span class="line">        if upy == 3:</span><br><span class="line">            messagebox.showinfo(&apos;提示&apos;, &apos;密码输入错误&apos;)</span><br><span class="line">        if upy == 1:</span><br><span class="line">            messagebox.showinfo(&apos;提示&apos;, &apos;欢迎管理员&apos;+username)</span><br><span class="line">            adminname = username</span><br><span class="line">            window_sign_up.destroy()</span><br><span class="line">        if upy == 2:</span><br><span class="line">            # messagebox.askokcancel(&apos;提示&apos;, &apos;账号输入错误&apos;)</span><br><span class="line">            #判断是不是管理员以外的人员登录</span><br><span class="line"></span><br><span class="line">            date2 = mysql(&quot;SELECT * FROM student&quot;)</span><br><span class="line"></span><br><span class="line">            # if username == date[][1]:</span><br><span class="line">            spy = 0</span><br><span class="line">            for alldate2 in date2:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                if alldate2[1] == int(username):</span><br><span class="line"></span><br><span class="line">                    if alldate2[4] == passwrod:</span><br><span class="line">                        spy = 1</span><br><span class="line">                        name1 = alldate2[2]</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        spy = 3</span><br><span class="line">                        break</span><br><span class="line">                        # messagebox.askokcancel(&apos;提示&apos;, &apos;密码输入错误&apos;)</span><br><span class="line">                else:</span><br><span class="line">                    spy = 2</span><br><span class="line">                    # messagebox.askokcancel(&apos;提示&apos;, &apos;账号输入错误&apos;)</span><br><span class="line">            if spy == 3:</span><br><span class="line">                messagebox.showinfo(&apos;提示&apos;, &apos;密码输入错误&apos;)</span><br><span class="line">            if spy == 1:</span><br><span class="line">                messagebox.showinfo(&apos;提示&apos;, &apos;欢迎学生&apos; + name1)</span><br><span class="line">                studentname = username</span><br><span class="line">                window_sign_up.destroy()</span><br><span class="line">            if spy == 2:</span><br><span class="line">                # messagebox.askokcancel(&apos;提示&apos;, &apos;账号输入错误&apos;)</span><br><span class="line">                # 判断是不是管理员以外的人员登录</span><br><span class="line"></span><br><span class="line">                date3 = mysql(&quot;SELECT * FROM teacher&quot;)</span><br><span class="line">                # if username == date[][1]:</span><br><span class="line">                tpy = 0</span><br><span class="line">                for alldate3 in date3:</span><br><span class="line">                    if alldate3[1] == int(username):</span><br><span class="line">                        if alldate3[3] == passwrod:</span><br><span class="line">                            tpy = 1</span><br><span class="line">                            name2 = alldate3[2]</span><br><span class="line">                            break</span><br><span class="line">                        else:</span><br><span class="line">                            tpy = 3</span><br><span class="line">                            break</span><br><span class="line">                            # messagebox.askokcancel(&apos;提示&apos;, &apos;密码输入错误&apos;)</span><br><span class="line">                    else:</span><br><span class="line">                        tpy = 2</span><br><span class="line">                        # messagebox.askokcancel(&apos;提示&apos;, &apos;账号输入错误&apos;)</span><br><span class="line">                if tpy == 3:</span><br><span class="line">                    messagebox.showinfo(&apos;提示&apos;, &apos;密码输入错误&apos;)</span><br><span class="line">                if tpy == 1:</span><br><span class="line">                    messagebox.showinfo(&apos;提示&apos;, &apos;欢迎老师&apos; + name2)</span><br><span class="line">                    teachername = username</span><br><span class="line">                    window_sign_up.destroy()</span><br><span class="line">                if tpy == 2:</span><br><span class="line">                    messagebox.showinfo(&apos;提示&apos;, &apos;账号输入错误&apos;)</span><br><span class="line"></span><br><span class="line">            # messagebox.askokcancel(&apos;提示&apos;, &apos;账号输入错误&apos;)</span><br><span class="line">            # 判断是不是管理员以外的人员登录</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def baoming(a):</span><br><span class="line">    b = messagebox.askyesno(&apos;提示&apos;, &apos;确定要报名该项目吗&apos;)</span><br><span class="line">    if b == True:</span><br><span class="line">        e = mysql(&quot;SELECT upid FROM pc WHERE uid = &quot; + str(studentname))</span><br><span class="line">        t = 0</span><br><span class="line">        for ee in e:</span><br><span class="line">            if ee[0] == a:</span><br><span class="line">                t = 1</span><br><span class="line">                messagebox.showinfo(&apos;提示&apos;,&apos;你当前已经报了该项目了，换个项目参加吧！&apos;)</span><br><span class="line">        if t == 0:</span><br><span class="line">            print(a)</span><br><span class="line">            c = mysql(&quot;INSERT INTO `pc`(`uid`, `upid`) VALUES (&quot;+studentname+&quot;,&quot;+str(a)+&quot;)&quot;)</span><br><span class="line">            d = tree.get_children()</span><br><span class="line">            for itme in d:</span><br><span class="line">                tree.delete(itme)</span><br><span class="line">            mydate()</span><br><span class="line">def baoming2(a):</span><br><span class="line">    b = messagebox.askyesno(&apos;提示&apos;, &apos;确定要报名该项目吗&apos;)</span><br><span class="line">    if b == True:</span><br><span class="line">        e = mysql(&quot;SELECT upid FROM pc WHERE uid = &quot; + str(teachername))</span><br><span class="line">        t = 0</span><br><span class="line">        for ee in e:</span><br><span class="line">            if ee[0] == a:</span><br><span class="line">                t = 1</span><br><span class="line">                messagebox.showinfo(&apos;提示&apos;,&apos;你当前已经报了该项目了，换个项目参加吧！&apos;)</span><br><span class="line">        if t == 0:</span><br><span class="line">            print(a)</span><br><span class="line">            c = mysql(&quot;INSERT INTO `pc`(`uid`, `upid`) VALUES (&quot;+teachername+&quot;,&quot;+str(a)+&quot;)&quot;)</span><br><span class="line">            d = tree.get_children()</span><br><span class="line">            for itme in d:</span><br><span class="line">                tree.delete(itme)</span><br><span class="line">            mydate2()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def restart_program():</span><br><span class="line">    python = sys.executable</span><br><span class="line">    os.execl(python, python, * sys.argv)</span><br><span class="line"></span><br><span class="line">def exit():</span><br><span class="line">    sys.exit()</span><br><span class="line"></span><br><span class="line">def adupstu():</span><br><span class="line">    global xiugai</span><br><span class="line">    xiugai = 0</span><br><span class="line">    v.set(&quot;学生报名信息(双击信息可修改)&quot;)</span><br><span class="line">    d = tree.get_children()</span><br><span class="line">    for itme in d:</span><br><span class="line">        tree.delete(itme)</span><br><span class="line">    myadda()</span><br><span class="line">def aduptea():</span><br><span class="line">    global xiugai</span><br><span class="line">    xiugai = 1</span><br><span class="line">    v.set(&quot;教师报名信息(双击信息可修改)&quot;)</span><br><span class="line">    d = tree.get_children()</span><br><span class="line">    for itme in d:</span><br><span class="line">        tree.delete(itme)</span><br><span class="line">    myadda2()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def addadmin():</span><br><span class="line">    def adddate():</span><br><span class="line">        user = usernamea.get()</span><br><span class="line">        passw = password.get()</span><br><span class="line">        if not user or not passw:</span><br><span class="line">            messagebox.showinfo(&apos;提示&apos;, &apos;账号或密码不能为空&apos;)</span><br><span class="line">            addadminv.destroy()</span><br><span class="line">        else:</span><br><span class="line">            ychongfu = None</span><br><span class="line">            chongfu = mysql(&quot;SELECT * FROM `admin` WHERE 1&quot;)</span><br><span class="line">            for chongfus in chongfu:</span><br><span class="line">                if user == chongfus[1]:</span><br><span class="line">                    ychongfu = 1</span><br><span class="line"></span><br><span class="line">            if ychongfu == 1:</span><br><span class="line">                messagebox.showinfo(&apos;提示&apos;,&apos;账号已经存在了&apos;)</span><br><span class="line">                addadminv.destroy()</span><br><span class="line">            else:</span><br><span class="line"></span><br><span class="line">                mysql(&quot;INSERT INTO `admin`(`username`, `password`) VALUES (&apos;&quot;+user+&quot;&apos;,&apos;&quot;+passw+&quot;&apos;)&quot;)</span><br><span class="line">                messagebox.showinfo(&apos;提示&apos;,&apos;添加成功&apos;)</span><br><span class="line">                addadminv.destroy()</span><br><span class="line">    addadminv = Toplevel()</span><br><span class="line"></span><br><span class="line">    sw = addadminv.winfo_screenwidth()</span><br><span class="line"></span><br><span class="line">    sh = addadminv.winfo_screenheight()</span><br><span class="line">    x = (sw - 350) / 2</span><br><span class="line"></span><br><span class="line">    y = (sh - 200) / 2</span><br><span class="line"></span><br><span class="line">    addadminv.geometry(&quot;%dx%d+%d+%d&quot; % (350, 200, x, y))</span><br><span class="line"></span><br><span class="line">    addadminv.title(&apos;添加管理员&apos;)</span><br><span class="line"></span><br><span class="line">    addadminv.resizable(width=False, height=False)</span><br><span class="line"></span><br><span class="line">    frame = Frame(addadminv)</span><br><span class="line">    frame.place(x=0, y=0, width=350, height=200)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Label(frame,text=&quot;账号&quot;).place(x=20,y=20,width=100,height=50)</span><br><span class="line">    Label(frame, text=&quot;密码&quot;).place(x=20, y=60, width=100, height=50)</span><br><span class="line">    usernamea = StringVar()</span><br><span class="line">    text = Entry(frame,textvariable=usernamea)</span><br><span class="line"></span><br><span class="line">    text.place(x=120, y=33, width=150, height=20)</span><br><span class="line"></span><br><span class="line">    password = StringVar()</span><br><span class="line">    text = Entry(frame,textvariable=password)</span><br><span class="line"></span><br><span class="line">    text.place(x=120, y=75, width=150, height=20)</span><br><span class="line"></span><br><span class="line">    ttk.Button(frame, text=&quot;添加&quot;,command=adddate).place(x=50, y=130, width=100, height=40)</span><br><span class="line">    ttk.Button(frame, text=&quot;取消&quot;,command=addadminv.destroy).place(x=200, y=130, width=100, height=40)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    addadminv.mainloop()</span><br><span class="line">def nowadmin():</span><br><span class="line">    global adminname</span><br><span class="line">    adminx = mysql(&quot;SELECT * FROM `admin` WHERE username=&apos;&quot;+adminname+&quot;&apos;&quot;)</span><br><span class="line">    def adddate():</span><br><span class="line">        passw = password.get()</span><br><span class="line">        if not passw:</span><br><span class="line">            messagebox.showinfo(&apos;提示&apos;, &apos;密码不能为空&apos;)</span><br><span class="line">            addadminv.destroy()</span><br><span class="line">        else:</span><br><span class="line">            mysql(&quot;UPDATE `admin` SET `password`=&apos;&quot;+passw+&quot;&apos; WHERE username=&apos;&quot;+adminname+&quot;&apos;&quot;)</span><br><span class="line">            messagebox.showinfo(&apos;提示&apos;,&apos;修改成功&apos;)</span><br><span class="line">            addadminv.destroy()</span><br><span class="line">    addadminv = Toplevel()</span><br><span class="line"></span><br><span class="line">    sw = addadminv.winfo_screenwidth()</span><br><span class="line"></span><br><span class="line">    sh = addadminv.winfo_screenheight()</span><br><span class="line">    x = (sw - 350) / 2</span><br><span class="line"></span><br><span class="line">    y = (sh - 200) / 2</span><br><span class="line"></span><br><span class="line">    addadminv.geometry(&quot;%dx%d+%d+%d&quot; % (350, 200, x, y))</span><br><span class="line"></span><br><span class="line">    addadminv.title(&apos;修改管理员信息&apos;)</span><br><span class="line"></span><br><span class="line">    addadminv.resizable(width=False, height=False)</span><br><span class="line"></span><br><span class="line">    frame = Frame(addadminv)</span><br><span class="line">    frame.place(x=0, y=0, width=350, height=200)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Label(frame,text=&quot;账号&quot;).place(x=20,y=20,width=100,height=50)</span><br><span class="line">    Label(frame, text=&quot;密码&quot;).place(x=20, y=60, width=100, height=50)</span><br><span class="line">    usernamea = StringVar()</span><br><span class="line"></span><br><span class="line">    text = Entry(frame,textvariable=usernamea)</span><br><span class="line">    text.delete(0, 100)</span><br><span class="line">    text.insert(0, adminx[0][1])</span><br><span class="line">    text.place(x=120, y=33, width=150, height=20)</span><br><span class="line">    text.config(state=&apos;disabled&apos;)</span><br><span class="line"></span><br><span class="line">    password = StringVar()</span><br><span class="line">    text = Entry(frame,textvariable=password)</span><br><span class="line">    text.delete(0, 100)</span><br><span class="line">    text.insert(0, adminx[0][2])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    text.place(x=120, y=75, width=150, height=20)</span><br><span class="line"></span><br><span class="line">    ttk.Button(frame, text=&quot;修改&quot;,command=adddate).place(x=50, y=130, width=100, height=40)</span><br><span class="line">    ttk.Button(frame, text=&quot;取消&quot;,command=addadminv.destroy).place(x=200, y=130, width=100, height=40)</span><br><span class="line">    addadminv.mainloop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def delel():</span><br><span class="line"></span><br><span class="line">    def deldate2(event):</span><br><span class="line">        yon = messagebox.askyesno(&apos;提示&apos;,&apos;确定删除该条信息？&apos;)</span><br><span class="line">        if yon == True:</span><br><span class="line">            for item in tree.selection():</span><br><span class="line">                item_text = tree.item(item, &quot;values&quot;)</span><br><span class="line">            mysql(&quot;DELETE FROM `admin` WHERE username=&apos;&quot;+item_text[1]+&quot;&apos;&quot;)</span><br><span class="line">            messagebox.showinfo(&apos;提示&apos;,&apos;删除成功&apos;)</span><br><span class="line">            d = tree.get_children()</span><br><span class="line">            for itme in d:</span><br><span class="line">                tree.delete(itme)</span><br><span class="line">            myadda4()</span><br><span class="line"></span><br><span class="line">        addadminv.destroy()</span><br><span class="line">        delel()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    addadminv = Toplevel()</span><br><span class="line"></span><br><span class="line">    sw = addadminv.winfo_screenwidth()</span><br><span class="line"></span><br><span class="line">    sh = addadminv.winfo_screenheight()</span><br><span class="line">    x = (sw - 350) / 2</span><br><span class="line"></span><br><span class="line">    y = (sh - 200) / 2</span><br><span class="line"></span><br><span class="line">    addadminv.geometry(&quot;%dx%d+%d+%d&quot; % (350, 200, x, y))</span><br><span class="line"></span><br><span class="line">    addadminv.title(&apos;修改管理员信息&apos;)</span><br><span class="line"></span><br><span class="line">    addadminv.resizable(width=False, height=False)</span><br><span class="line">    Label(addadminv,text=&quot;(双击信息可删除)&quot;).pack()</span><br><span class="line">    frame = Frame(addadminv)</span><br><span class="line">    frame.place(x=0, y=20, width=350, height=200)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    tree = Treeview(frame, columns=(&apos;c1&apos;, &apos;c2&apos;, &apos;c3&apos;), show=&quot;headings&quot;,</span><br><span class="line">                    yscrollcommand=scrollBar.set)</span><br><span class="line"></span><br><span class="line">    def myadda4():</span><br><span class="line">        tree.column(&apos;c1&apos;, width=116, anchor=&apos;center&apos;)</span><br><span class="line"></span><br><span class="line">        tree.column(&apos;c2&apos;, width=116, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c3&apos;, width=116, anchor=&apos;center&apos;)</span><br><span class="line"></span><br><span class="line">        tree.heading(&apos;c1&apos;, text=&apos;编号&apos;)</span><br><span class="line"></span><br><span class="line">        tree.heading(&apos;c2&apos;, text=&apos;账号&apos;)</span><br><span class="line">        tree.heading(&apos;c3&apos;, text=&apos;密码&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        tree.pack(side=LEFT, fill=Y)</span><br><span class="line"></span><br><span class="line">        scrollBar.config(command=tree.yview)</span><br><span class="line"></span><br><span class="line">        i = 1</span><br><span class="line">        con = mysql(&quot;SELECT * FROM `admin` WHERE 1&quot;)</span><br><span class="line">        for co in con:</span><br><span class="line">            tree.insert(&apos;&apos;, i, values=(i, co[1], co[2]))</span><br><span class="line">            i = i + 1</span><br><span class="line">    myadda4()</span><br><span class="line">    tree.bind(&apos;&lt;Double-Button-1&gt;&apos;, deldate2)</span><br><span class="line">    addadminv.mainloop()</span><br><span class="line">def addxiangmu():</span><br><span class="line">    lastpid = None</span><br><span class="line">    allxiangmu = mysql(&quot;SELECT * FROM `project` WHERE 1&quot;)</span><br><span class="line">    for allxiangmus in allxiangmu:</span><br><span class="line">        lastpid = allxiangmus[1]</span><br><span class="line">    def adddate():</span><br><span class="line">        doubleo = None</span><br><span class="line">        user = usernamea.get()</span><br><span class="line">#项目是否重复</span><br><span class="line">        for allxiangm2 in allxiangmu:</span><br><span class="line">            if user == allxiangm2[2]:</span><br><span class="line">                doubleo = 1</span><br><span class="line">        if doubleo == 1:</span><br><span class="line">            messagebox.showinfo(&apos;提示&apos;,&apos;项目名已经存在了！&apos;)</span><br><span class="line">            addadminv.destroy()</span><br><span class="line">        else:</span><br><span class="line">            if not user:</span><br><span class="line">                messagebox.showinfo(&apos;提示&apos;, &apos;项目名不能为空&apos;)</span><br><span class="line">                addadminv.destroy()</span><br><span class="line">            else:</span><br><span class="line">                newlastpid = lastpid + 1</span><br><span class="line">                mysql(&quot;INSERT INTO `project`(`pid`, `pname`) VALUES (&apos;&quot;+str(newlastpid)+&quot;&apos;,&apos;&quot;+user+&quot;&apos;)&quot;)</span><br><span class="line">                messagebox.showinfo(&apos;提示&apos;,&apos;添加成功&apos;)</span><br><span class="line">                addadminv.destroy()</span><br><span class="line">    addadminv = Toplevel()</span><br><span class="line">    sw = addadminv.winfo_screenwidth()</span><br><span class="line">    sh = addadminv.winfo_screenheight()</span><br><span class="line">    x = (sw - 350) / 2</span><br><span class="line">    y = (sh - 200) / 2</span><br><span class="line">    addadminv.geometry(&quot;%dx%d+%d+%d&quot; % (350, 200, x, y))</span><br><span class="line">    addadminv.title(&apos;添加项目&apos;)</span><br><span class="line">    addadminv.resizable(width=False, height=False)</span><br><span class="line">    frame = Frame(addadminv)</span><br><span class="line">    frame.place(x=0, y=0, width=350, height=200)</span><br><span class="line">    Label(frame,text=&quot;项目名&quot;).place(x=20,y=20,width=100,height=50)</span><br><span class="line">    usernamea = StringVar()</span><br><span class="line">    text = Entry(frame,textvariable=usernamea)</span><br><span class="line">    text.place(x=120, y=33, width=150, height=20)</span><br><span class="line">    ttk.Button(frame, text=&quot;添加&quot;,command=adddate).place(x=50, y=130, width=100, height=40)</span><br><span class="line">    ttk.Button(frame, text=&quot;取消&quot;,command=addadminv.destroy).place(x=200, y=130, width=100, height=40)</span><br><span class="line">    addadminv.mainloop()</span><br><span class="line">def delxiangmu():</span><br><span class="line">    def deldate2(event):</span><br><span class="line">        yon = messagebox.askyesno(&apos;提示&apos;,&apos;确定删除该条信息？&apos;)</span><br><span class="line">        if yon == True:</span><br><span class="line">            for item in tree.selection():</span><br><span class="line">                item_text = tree.item(item, &quot;values&quot;)</span><br><span class="line">            mysql(&quot;DELETE FROM `project` WHERE pname = &apos;&quot;+item_text[1]+&quot;&apos;&quot;)</span><br><span class="line">            messagebox.showinfo(&apos;提示&apos;,&apos;删除成功&apos;)</span><br><span class="line">            d = tree.get_children()</span><br><span class="line">            for itme in d:</span><br><span class="line">                tree.delete(itme)</span><br><span class="line">            myadda4()</span><br><span class="line">        addadminv.destroy()</span><br><span class="line">        delxiangmu()</span><br><span class="line">    addadminv = Toplevel()</span><br><span class="line">    sw = addadminv.winfo_screenwidth()</span><br><span class="line">    sh = addadminv.winfo_screenheight()</span><br><span class="line">    x = (sw - 350) / 2</span><br><span class="line">    y = (sh - 200) / 2</span><br><span class="line">    addadminv.geometry(&quot;%dx%d+%d+%d&quot; % (350, 200, x, y))</span><br><span class="line">    addadminv.title(&apos;删除项目信息&apos;)</span><br><span class="line">    addadminv.resizable(width=False, height=False)</span><br><span class="line">    Label(addadminv,text=&quot;(双击信息可删除)&quot;).pack()</span><br><span class="line">    frame = Frame(addadminv)</span><br><span class="line">    frame.place(x=0, y=20, width=350, height=200)</span><br><span class="line">    tree = Treeview(frame, columns=(&apos;c1&apos;, &apos;c2&apos;), show=&quot;headings&quot;,</span><br><span class="line">                    yscrollcommand=scrollBar.set)</span><br><span class="line">    def myadda4():</span><br><span class="line">        tree.column(&apos;c1&apos;, width=175, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c2&apos;, width=175, anchor=&apos;center&apos;)</span><br><span class="line">        tree.heading(&apos;c1&apos;, text=&apos;编号&apos;)</span><br><span class="line">        tree.heading(&apos;c2&apos;, text=&apos;项目名&apos;)</span><br><span class="line">        tree.pack(side=LEFT, fill=Y)</span><br><span class="line">        scrollBar.config(command=tree.yview)</span><br><span class="line">        i = 1</span><br><span class="line">        con = mysql(&quot;SELECT * FROM `project` WHERE 1&quot;)</span><br><span class="line">        for co in con:</span><br><span class="line">            tree.insert(&apos;&apos;, i, values=(i, co[2]))</span><br><span class="line">            i = i + 1</span><br><span class="line">    myadda4()</span><br><span class="line">    tree.bind(&apos;&lt;Double-Button-1&gt;&apos;, deldate2)</span><br><span class="line">    addadminv.mainloop()</span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    window_sign_up = Tk()</span><br><span class="line">    # window_sign_up.geometry(&apos;350x200&apos;)</span><br><span class="line">    sw = window_sign_up.winfo_screenwidth()</span><br><span class="line">    sh = window_sign_up.winfo_screenheight()</span><br><span class="line">    x = (sw - 350) / 2</span><br><span class="line">    y = (sh - 200) / 2</span><br><span class="line">    window_sign_up.geometry(&quot;%dx%d+%d+%d&quot; % (350, 200, x, y))</span><br><span class="line">    window_sign_up.title(&apos;校际运动会管理系统登录&apos;)</span><br><span class="line">    window_sign_up.resizable(width=False,height=False)</span><br><span class="line">#窗体定义</span><br><span class="line">    new_name = StringVar()</span><br><span class="line">    Label(window_sign_up, text=&apos;账号/学号/教师编号: &apos;).place(x=10, y=10)</span><br><span class="line">    entry_new_name = Entry(window_sign_up, textvariable=new_name)</span><br><span class="line">    entry_new_name.place(x=150, y=10)</span><br><span class="line">    new_pwd = StringVar()</span><br><span class="line">    Label(window_sign_up, text=&apos;密码: &apos;).place(x=60, y=50)</span><br><span class="line">    entry_usr_pwd = Entry(window_sign_up, textvariable=new_pwd, show=&apos;*&apos;)</span><br><span class="line">    entry_usr_pwd.place(x=150, y=50)</span><br><span class="line">    btn_confirm_sign_up = ttk.Button(window_sign_up, text=&apos;登录&apos;, command = loginyn)</span><br><span class="line">    btn_confirm_sign_up2 = ttk.Button(window_sign_up, text=&apos;退出&apos;, command=window_sign_up.destroy)</span><br><span class="line">    btn_confirm_sign_up.place(x=50, y=130, width=100,height=40)</span><br><span class="line">    btn_confirm_sign_up2.place(x=200, y=130,width=100,height=40)</span><br><span class="line">    window_sign_up.mainloop()</span><br><span class="line">#---------------------------------------------------------------学生窗口</span><br><span class="line">    if studentname != None:</span><br><span class="line">        stuwin = Tk()</span><br><span class="line">        sw = stuwin.winfo_screenwidth()</span><br><span class="line">        sh = stuwin.winfo_screenheight()</span><br><span class="line">        x = (sw - 1200) / 2</span><br><span class="line">        y = (sh - 500) / 2</span><br><span class="line">        stuwin.geometry(&quot;%dx%d+%d+%d&quot; % (1200, 500, x, y))</span><br><span class="line">        stuwin.title(&apos;学生报名&apos;)</span><br><span class="line">        stuwin.resizable(width=False, height=False)</span><br><span class="line">        frame = Frame(stuwin)</span><br><span class="line">        frame.place(x=0,y=25,width = 1200,height = 500)</span><br><span class="line">        scrollBar = Scrollbar(frame)</span><br><span class="line">        scrollBar.pack(side=RIGHT, fill=Y)</span><br><span class="line">        tree = Treeview(frame,columns=(&apos;c1&apos;, &apos;c2&apos;,&apos;c3&apos;,&apos;c4&apos;,&apos;c5&apos;,&apos;c6&apos;),show=&quot;headings&quot;,yscrollcommand=scrollBar.set)</span><br><span class="line">        tree.column(&apos;c1&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c2&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c3&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c4&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c5&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c6&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.heading(&apos;c1&apos;, text=&apos;编号&apos;)</span><br><span class="line">        tree.heading(&apos;c2&apos;, text=&apos;学号&apos;)</span><br><span class="line">        tree.heading(&apos;c3&apos;, text=&apos;姓名&apos;)</span><br><span class="line">        tree.heading(&apos;c4&apos;, text=&apos;班级&apos;)</span><br><span class="line">        tree.heading(&apos;c5&apos;, text=&apos;项目&apos;)</span><br><span class="line">        tree.heading(&apos;c6&apos;, text=&apos;成绩&apos;)</span><br><span class="line">        tree.pack(side=LEFT, fill=Y)</span><br><span class="line">        scrollBar.config(command=tree.yview)</span><br><span class="line">        # 定义并绑定Treeview组件的鼠标单击事件</span><br><span class="line">        Label(stuwin,text=&quot;已经报名项目以及成绩:&quot;).pack()</span><br><span class="line">        def mydate():</span><br><span class="line">            pc = mysql(&quot;SELECT * FROM pc&quot;)</span><br><span class="line">            i=1</span><br><span class="line">            for pc1 in pc:</span><br><span class="line">                if pc1[1] == int(studentname):</span><br><span class="line">                    name = mysql(&quot;SELECT * FROM student WHERE sid = &quot;+studentname)</span><br><span class="line">                    xm = mysql(&quot;SELECT * FROM project WHERE pid = &quot;+str(pc1[2]))</span><br><span class="line">                    cj = &quot;&quot;</span><br><span class="line">                    if pc1[4] == 0:</span><br><span class="line">                        cj = &quot;未通过管理员审核&quot;</span><br><span class="line">                    if pc1[4] == 1:</span><br><span class="line">                        cj = pc1[3]</span><br><span class="line">                    tree.insert(&apos;&apos;,i,values=(i,studentname,name[0][2],name[0][3],xm[0][2],cj))</span><br><span class="line">                    i=i+1</span><br><span class="line">        mydate()</span><br><span class="line">        #菜单</span><br><span class="line">        menu = Menu(stuwin)</span><br><span class="line">        pro = mysql(&quot;SELECT * FROM project&quot;)</span><br><span class="line">        # fmenu1 = Menu(stuwin)</span><br><span class="line">        # fmenu1.add_command(label=&quot;当前可报项目&quot;)</span><br><span class="line">        fmenu2 = Menu(menu, tearoff=0)</span><br><span class="line">        fmenu3 = Menu(menu,tearoff=0)</span><br><span class="line">        # j=0</span><br><span class="line">        for project in pro:</span><br><span class="line">            fmenu2.add_command(label=project[2],command=lambda x=project[1]: baoming(x))</span><br><span class="line">            # j=j+1</span><br><span class="line">            # fmenu2.add_separator()</span><br><span class="line">            # Button(stuwin,text = project[2]).place(x = 50, y = 50,width = 60, height = 40)</span><br><span class="line">        fmenu3.add_command(label=&quot;退出登录&quot;,command = restart_program)</span><br><span class="line">        fmenu3.add_command(label=&quot;关闭程序&quot;,command = exit)</span><br><span class="line">        menu.add_cascade(label=&quot;当前可报项目&quot;,menu=fmenu2)</span><br><span class="line">        menu.add_cascade(label=&quot;退出&quot;, menu=fmenu3)</span><br><span class="line">        stuwin[&apos;menu&apos;] = menu</span><br><span class="line">        stuwin.config(menu=menu)</span><br><span class="line">        stuwin.mainloop()</span><br><span class="line">    if adminname != None:</span><br><span class="line">        adminwin = Tk()</span><br><span class="line">        sw = adminwin.winfo_screenwidth()</span><br><span class="line">        sh = adminwin.winfo_screenheight()</span><br><span class="line">        x = (sw - 1200) / 2</span><br><span class="line">        y = (sh - 500) / 2</span><br><span class="line">        adminwin.geometry(&quot;%dx%d+%d+%d&quot; % (1200, 500, x, y))</span><br><span class="line">        adminwin.title(&apos;管理员界面&apos;)</span><br><span class="line">        adminwin.resizable(width=False, height=False)</span><br><span class="line">        frame = Frame(adminwin)</span><br><span class="line">        frame.place(x=0, y=25, width=1200, height=500)</span><br><span class="line">        menu = Menu(adminwin)</span><br><span class="line">        fm1 = Menu(menu, tearoff=0)</span><br><span class="line">        fm2 = Menu(menu, tearoff=0)</span><br><span class="line">        fm3 = Menu(menu, tearoff=0)</span><br><span class="line">        fm4 = Menu(menu, tearoff=0)</span><br><span class="line">        fm1.add_command(label=&quot;退出登录&quot;, command=restart_program)</span><br><span class="line">        fm1.add_command(label=&quot;关闭程序&quot;, command=exit)</span><br><span class="line">        fm2.add_command(label=&quot;学生报名管理&quot;,command=adupstu)</span><br><span class="line">        fm2.add_command(label=&quot;教师报名管理&quot;,command=aduptea)</span><br><span class="line">        fm3.add_command(label=&quot;添加管理员&quot;,command=addadmin)</span><br><span class="line">        fm3.add_command(label=&quot;修改当前管理员信息&quot;,command=nowadmin)</span><br><span class="line">        fm3.add_command(label=&quot;删除管理员&quot;, command=delel)</span><br><span class="line">        fm4.add_command(label=&quot;增加运动会项目&quot;, command = addxiangmu)</span><br><span class="line">        fm4.add_command(label=&quot;删除运动会项目&quot;, command = delxiangmu)</span><br><span class="line">        menu.add_cascade(label=&quot;运动会报名管理&quot;, menu=fm2)</span><br><span class="line">        menu.add_cascade(label=&quot;运动会项目管理&quot;, menu=fm4)</span><br><span class="line">        menu.add_cascade(label=&quot;管理员信息&quot;, menu=fm3)</span><br><span class="line">        menu.add_cascade(label=&quot;退出&quot;, menu=fm1)</span><br><span class="line">        adminwin[&apos;menu&apos;] = menu</span><br><span class="line">        adminwin.config(menu=menu)</span><br><span class="line">        # Button(adminwin,text=&quot;学生报名管理&quot;).place(x=10,y=25,width=100,height=30)</span><br><span class="line">        # Button(adminwin, text=&quot;教师报名管理&quot;).place(x=10, y=75, width=100, height=30)</span><br><span class="line">        scrollBar = Scrollbar(frame)</span><br><span class="line">        scrollBar.pack(side=RIGHT, fill=Y)</span><br><span class="line">        v = StringVar()</span><br><span class="line">        v.set(&quot;学生报名信息(双击信息可修改)&quot;)</span><br><span class="line">        Label(adminwin, textvariable=v).pack()</span><br><span class="line">        tree = Treeview(frame, columns=(&apos;c1&apos;, &apos;c2&apos;, &apos;c3&apos;, &apos;c4&apos;, &apos;c5&apos;, &apos;c6&apos;), show=&quot;headings&quot;,</span><br><span class="line">                        yscrollcommand=scrollBar.set)</span><br><span class="line">        def myadda():</span><br><span class="line">            tree.column(&apos;c1&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c2&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c3&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c4&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c5&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c6&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.heading(&apos;c1&apos;, text=&apos;编号&apos;)</span><br><span class="line">            tree.heading(&apos;c2&apos;, text=&apos;学号&apos;)</span><br><span class="line">            tree.heading(&apos;c3&apos;, text=&apos;姓名&apos;)</span><br><span class="line">            tree.heading(&apos;c4&apos;, text=&apos;班级&apos;)</span><br><span class="line">            tree.heading(&apos;c5&apos;, text=&apos;项目&apos;)</span><br><span class="line">            tree.heading(&apos;c6&apos;, text=&apos;成绩&apos;)</span><br><span class="line">            tree.pack(side=LEFT, fill=Y)</span><br><span class="line">            scrollBar.config(command=tree.yview)</span><br><span class="line">            # 定义并绑定Treeview组件的鼠标单击事件</span><br><span class="line">            def treeviewClick(event):</span><br><span class="line">                global xiugai</span><br><span class="line">                item_text = None</span><br><span class="line">                if xiugai == 0:</span><br><span class="line">                    def adminexitnewtop():</span><br><span class="line">                        newtop.destroy()</span><br><span class="line">                    for item in tree.selection():</span><br><span class="line">                        item_text = tree.item(item, &quot;values&quot;)</span><br><span class="line">                       # print(item_text[1])  # 输出所选行的第一列的值</span><br><span class="line">                    alldate = mysql(&quot;SELECT * FROM pc,project,student WHERE uid = sid and upid = pid and uid = &quot;+item_text[1]+&quot; and pname = &apos;&quot;+ item_text[4]+&quot;&apos;&quot;)</span><br><span class="line">                    def submit():</span><br><span class="line">                        xuehao = xh.get()</span><br><span class="line">                        xiangmuname = xmu.get()</span><br><span class="line">                        shenhe = sh.get()</span><br><span class="line">                        if shenhe == &apos;1&apos;:</span><br><span class="line">                            xmcj = cj.get()</span><br><span class="line">                            mypid = mysql(&quot;SELECT * FROM project WHERE pname = &apos;&quot;+xiangmuname+&quot;&apos;&quot;)</span><br><span class="line">                            #pid = mypid[0][1]</span><br><span class="line">                            mysql(&quot;UPDATE `pc` SET `cj`=&quot;+xmcj+&quot;,`sh`=&quot;+shenhe+&quot; WHERE uid = &quot;+xuehao+&quot; and upid = &quot;+ str(mypid[0][1]))</span><br><span class="line">                            messagebox.showinfo(&apos;提示&apos;,&apos;修改成功&apos;)</span><br><span class="line">                            adminexitnewtop()</span><br><span class="line">                            adupstu()</span><br><span class="line">                        else:</span><br><span class="line">                            adminexitnewtop()</span><br><span class="line">                            messagebox.showinfo(&apos;提示&apos;, &apos;修改失败&apos;)</span><br><span class="line">                    def del1():</span><br><span class="line">                        xuehao = xh.get()</span><br><span class="line">                        xiangmuname = xmu.get()</span><br><span class="line">                        mypid = mysql(&quot;SELECT * FROM project WHERE pname = &apos;&quot; + xiangmuname + &quot;&apos;&quot;)</span><br><span class="line">                        mysql(&quot;DELETE FROM `pc` WHERE uid = &quot;+xuehao+&quot; and upid = &quot;+ str(mypid[0][1]))</span><br><span class="line">                        messagebox.showinfo(&apos;提示&apos;, &apos;删除成功&apos;)</span><br><span class="line">                        adminexitnewtop()</span><br><span class="line">                        adupstu()</span><br><span class="line">                    newtop = Toplevel()</span><br><span class="line">                    sw = newtop.winfo_screenwidth()</span><br><span class="line">                    sh = newtop.winfo_screenheight()</span><br><span class="line">                    x = (sw - 600) / 2</span><br><span class="line">                    y = (sh - 500) / 2</span><br><span class="line">                    newtop.geometry(&quot;%dx%d+%d+%d&quot; % (600, 500, x, y))</span><br><span class="line">                    newtop.title(&apos;管理员界面&apos;)</span><br><span class="line">                    newtop.resizable(width=False, height=False)</span><br><span class="line">                    frame = Frame(newtop)</span><br><span class="line">                    frame.place(x=0, y=0, width=600, height=500)</span><br><span class="line">                    Label(frame,text=&quot;学号：&quot;).place(x=40,y=30,width=100,height=30)</span><br><span class="line">                    Label(frame, text=&quot;姓名：&quot;).place(x=40, y=60, width=100, height=30)</span><br><span class="line">                    Label(frame, text=&quot;班级：&quot;).place(x=40, y=90, width=100, height=30)</span><br><span class="line">                    Label(frame, text=&quot;项目：&quot;).place(x=40, y=120, width=100, height=30)</span><br><span class="line">                    Label(frame, text=&quot;成绩：&quot;).place(x=40, y=150, width=100, height=30)</span><br><span class="line">                    Label(frame, text=&quot;是否通过审核：&quot;).place(x=40, y=180, width=100, height=60)</span><br><span class="line">                    xh = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=xh)</span><br><span class="line">                    text.place(x=120,y=33,width=100,height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0,item_text[1])</span><br><span class="line">                    text.config(state=&apos;disabled&apos;)</span><br><span class="line">                    xm = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=xm)</span><br><span class="line">                    text.place(x=120, y=65, width=100, height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0, item_text[2])</span><br><span class="line">                    text.config(state=&apos;disabled&apos;)</span><br><span class="line">                    bj = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=bj,)</span><br><span class="line">                    text.place(x=120, y=97, width=130, height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0, item_text[3])</span><br><span class="line">                    text.config(state = &apos;disabled&apos;)</span><br><span class="line">                    xmu = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=xmu)</span><br><span class="line">                    text.place(x=120, y=127, width=100, height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0, item_text[4])</span><br><span class="line">                    text.config(state=&apos;disabled&apos;)</span><br><span class="line">                    cj = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=cj)</span><br><span class="line">                    text.place(x=120, y=156, width=100, height=20)</span><br><span class="line">                    if alldate[0][4] == 1:</span><br><span class="line">                        text.delete(0, 100)</span><br><span class="line">                        text.insert(0, alldate[0][3])</span><br><span class="line">                    sh = StringVar()</span><br><span class="line">                    #text = Entry(frame, textvariable=sh)</span><br><span class="line">                    text = ttk.Combobox(frame, width=12, textvariable=sh)</span><br><span class="line">                    text[&apos;values&apos;] = (0,1)  # 设置下拉列表的值</span><br><span class="line">                    #numberChosen.grid(column=1, row=1)  # 设置其在界面中出现的位置  column代表列   row 代表行</span><br><span class="line">                    text.current(0)</span><br><span class="line">                    text.place(x=150, y=198, width=100, height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0, alldate[0][4])</span><br><span class="line">                    Label(frame, text=&quot;注意：只有当审核通过时，你打的成绩才能被显示（0为审核不通过，1为审核通过）&quot;).place(x=20, y=226, width=600, height=20)</span><br><span class="line">                    ttk.Button(frame,text=&quot;提交修改&quot;,command=submit).place(x=60, y=270, width=100, height=40)</span><br><span class="line">                    ttk.Button(frame, text=&quot;删除该条信息&quot;, command=del1).place(x=220, y=270, width=100, height=40)</span><br><span class="line">                    ttk.Button(frame, text=&quot;取消修改&quot;,command=adminexitnewtop).place(x=380, y=270, width=100, height=40)</span><br><span class="line">                    #print(item_text[1])</span><br><span class="line">                    newtop.mainloop()</span><br><span class="line">                if xiugai == 1:</span><br><span class="line">                    def adminexitnewtop2():</span><br><span class="line">                        newtop2.destroy()</span><br><span class="line">                    for item in tree.selection():</span><br><span class="line">                        item_text = tree.item(item, &quot;values&quot;)</span><br><span class="line">                    # # print(item_text[1])  # 输出所选行的第一列的值</span><br><span class="line">                    alldate = mysql(&quot;SELECT * FROM pc,project,teacher WHERE uid = tid and upid = pid and uid = &quot; + item_text[1] + &quot; and pname = &apos;&quot; + item_text[3] + &quot;&apos;&quot;)</span><br><span class="line">                    def submit2():</span><br><span class="line">                        teaid1 = teaid.get()</span><br><span class="line">                        xmu21 = xmu2.get()</span><br><span class="line">                        shenhe = sh.get()</span><br><span class="line">                        if shenhe == &apos;1&apos;:</span><br><span class="line">                            xmcj2 = cj2.get()</span><br><span class="line">                            mypid = mysql(&quot;SELECT * FROM project WHERE pname = &apos;&quot; + xmu21 + &quot;&apos;&quot;)</span><br><span class="line">                            # pid = mypid[0][1]</span><br><span class="line">                            mysql(</span><br><span class="line">                                &quot;UPDATE `pc` SET `cj`=&quot; + xmcj2 + &quot;,`sh`=&quot; + shenhe + &quot; WHERE uid = &quot; + teaid1 + &quot; and upid = &quot; + str(</span><br><span class="line">                                    mypid[0][1]))</span><br><span class="line">                            messagebox.showinfo(&apos;提示&apos;, &apos;修改成功&apos;)</span><br><span class="line">                            adminexitnewtop2()</span><br><span class="line">                            aduptea()</span><br><span class="line">                        else:</span><br><span class="line">                            adminexitnewtop2()</span><br><span class="line">                            messagebox.showinfo(&apos;提示&apos;, &apos;修改失败&apos;)</span><br><span class="line">                    def del12():</span><br><span class="line">                        teaid1 = teaid.get()</span><br><span class="line">                        xmu21 = xmu2.get()</span><br><span class="line">                        mypid = mysql(&quot;SELECT * FROM project WHERE pname = &apos;&quot; + xmu21 + &quot;&apos;&quot;)</span><br><span class="line">                        mysql(&quot;DELETE FROM `pc` WHERE uid = &quot; + teaid1 + &quot; and upid = &quot; + str(mypid[0][1]))</span><br><span class="line">                        messagebox.showinfo(&apos;提示&apos;, &apos;删除成功&apos;)</span><br><span class="line">                        adminexitnewtop2()</span><br><span class="line">                        aduptea()</span><br><span class="line">                    newtop2 = Toplevel()</span><br><span class="line">                    sw = newtop2.winfo_screenwidth()</span><br><span class="line">                    sh = newtop2.winfo_screenheight()</span><br><span class="line">                    x = (sw - 600) / 2</span><br><span class="line">                    y = (sh - 500) / 2</span><br><span class="line">                    newtop2.geometry(&quot;%dx%d+%d+%d&quot; % (600, 500, x, y))</span><br><span class="line">                    newtop2.title(&apos;管理员界面&apos;)</span><br><span class="line">                    newtop2.resizable(width=False, height=False)</span><br><span class="line">                    frame = Frame(newtop2)</span><br><span class="line">                    frame.place(x=0, y=0, width=600, height=500)</span><br><span class="line">                    Label(frame, text=&quot;教师编号：&quot;).place(x=40, y=30, width=100, height=30)</span><br><span class="line">                    Label(frame, text=&quot;姓名：&quot;).place(x=40, y=60, width=100, height=30)</span><br><span class="line">                    Label(frame, text=&quot;项目：&quot;).place(x=40, y=90, width=100, height=30)</span><br><span class="line">                    Label(frame, text=&quot;成绩：&quot;).place(x=40, y=120, width=100, height=30)</span><br><span class="line">                    Label(frame, text=&quot;是否通过审核：&quot;).place(x=40, y=150, width=100, height=60)</span><br><span class="line">                    teaid = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=teaid)</span><br><span class="line">                    text.place(x=120, y=33, width=100, height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0, item_text[1])</span><br><span class="line">                    text.config(state=&apos;disabled&apos;)</span><br><span class="line">                    teaname = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=teaname)</span><br><span class="line">                    text.place(x=120, y=65, width=100, height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0, item_text[2])</span><br><span class="line">                    text.config(state=&apos;disabled&apos;)</span><br><span class="line">                    xmu2 = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=xmu2)</span><br><span class="line">                    text.place(x=120, y=97, width=130, height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0, item_text[3])</span><br><span class="line">                    text.config(state=&apos;disabled&apos;)</span><br><span class="line">                    cj2 = StringVar()</span><br><span class="line">                    text = Entry(frame, textvariable=cj2)</span><br><span class="line">                    text.place(x=120, y=127, width=100, height=20)</span><br><span class="line">                    if alldate[0][4] == 1:</span><br><span class="line">                        text.delete(0, 100)</span><br><span class="line">                        text.insert(0, alldate[0][3])</span><br><span class="line">                    sh = StringVar()</span><br><span class="line">                    # text = Entry(frame, textvariable=sh)</span><br><span class="line">                    text = ttk.Combobox(frame, width=12, textvariable=sh)</span><br><span class="line">                    text[&apos;values&apos;] = (0, 1)  # 设置下拉列表的值</span><br><span class="line">                    # numberChosen.grid(column=1, row=1)  # 设置其在界面中出现的位置  column代表列   row 代表行</span><br><span class="line">                    text.current(0)</span><br><span class="line">                    text.place(x=150, y=170, width=100, height=20)</span><br><span class="line">                    text.delete(0, 100)</span><br><span class="line">                    text.insert(0, alldate[0][4])</span><br><span class="line">                    Label(frame, text=&quot;注意：只有当审核通过时，你打的成绩才能被显示（0为审核不通过，1为审核通过）&quot;).place(x=20, y=226, width=600, height=20)</span><br><span class="line">                    ttk.Button(frame, text=&quot;提交修改&quot;, command=submit2).place(x=60, y=270, width=100, height=40)</span><br><span class="line">                    ttk.Button(frame, text=&quot;删除该条信息&quot;, command=del12).place(x=220, y=270, width=100, height=40)</span><br><span class="line">                    ttk.Button(frame, text=&quot;取消修改&quot;, command=adminexitnewtop2).place(x=380, y=270, width=100, height=40)</span><br><span class="line">                    # print(item_text[1])</span><br><span class="line">                    newtop2.mainloop()</span><br><span class="line">            tree.bind(&apos;&lt;Double-Button-1&gt;&apos;, treeviewClick)</span><br><span class="line">            i = 1</span><br><span class="line">            con = mysql(&quot;SELECT * FROM pc,project,student WHERE uid = sid and upid = pid&quot;)</span><br><span class="line">            for co in con:</span><br><span class="line">                cj = &quot;&quot;</span><br><span class="line">                if co[4] == 0:</span><br><span class="line">                    cj = &quot;未通过管理员审核&quot;</span><br><span class="line">                if co[4] == 1:</span><br><span class="line">                    cj = co[3]</span><br><span class="line">                tree.insert(&apos;&apos;,i,values=(i,co[1],co[10],co[11],co[7],cj))</span><br><span class="line">                i = i+1</span><br><span class="line">        myadda()</span><br><span class="line">        #教师信息管理</span><br><span class="line">        def myadda2():</span><br><span class="line">            # tree.configure(columns=(&apos;c1&apos;, &apos;c2&apos;, &apos;c3&apos;, &apos;c4&apos;, &apos;c5&apos;))</span><br><span class="line">            tree.column(&apos;c1&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c2&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c3&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c4&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c5&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.column(&apos;c6&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">            tree.heading(&apos;c1&apos;, text=&apos;编号&apos;)</span><br><span class="line">            tree.heading(&apos;c2&apos;, text=&apos;教师编号&apos;)</span><br><span class="line">            tree.heading(&apos;c3&apos;, text=&apos;姓名&apos;)</span><br><span class="line">            tree.heading(&apos;c4&apos;, text=&apos;项目&apos;)</span><br><span class="line">            tree.heading(&apos;c5&apos;, text=&apos;成绩&apos;)</span><br><span class="line">            tree.heading(&apos;c6&apos;, text=&apos;&apos;)</span><br><span class="line">            tree.pack(side=LEFT, fill=Y)</span><br><span class="line">            scrollBar.config(command=tree.yview)</span><br><span class="line">            # 定义并绑定Treeview组件的鼠标单击事件</span><br><span class="line">            i = 1</span><br><span class="line">            con = mysql(&quot;SELECT * FROM pc,project,teacher WHERE uid = tid and upid = pid&quot;)</span><br><span class="line">            for co in con:</span><br><span class="line">                cj = &quot;&quot;</span><br><span class="line">                if co[4] == 0:</span><br><span class="line">                    cj = &quot;未通过管理员审核&quot;</span><br><span class="line">                if co[4] == 1:</span><br><span class="line">                    cj = co[3]</span><br><span class="line">                tree.insert(&apos;&apos;,i,values=(i,co[1],co[10],co[7],cj))</span><br><span class="line">                i = i+1</span><br><span class="line">        adminwin.mainloop()</span><br><span class="line">    #------------------------------------------------------------------------------教师窗口</span><br><span class="line">    if teachername != None:</span><br><span class="line">        tcwin = Tk()</span><br><span class="line">        sw = tcwin.winfo_screenwidth()</span><br><span class="line">        sh = tcwin.winfo_screenheight()</span><br><span class="line">        x = (sw - 1000) / 2</span><br><span class="line">        y = (sh - 500) / 2</span><br><span class="line">        tcwin.geometry(&quot;%dx%d+%d+%d&quot; % (1000, 500, x, y))</span><br><span class="line">        tcwin.title(&apos;教师报名&apos;)</span><br><span class="line">        tcwin.resizable(width=False, height=False)</span><br><span class="line">        frame = Frame(tcwin)</span><br><span class="line">        frame.place(x=0, y=25, width=1000, height=500)</span><br><span class="line">        scrollBar = Scrollbar(frame)</span><br><span class="line">        scrollBar.pack(side=RIGHT, fill=Y)</span><br><span class="line">        tree = Treeview(frame, columns=(&apos;c1&apos;, &apos;c2&apos;, &apos;c3&apos;, &apos;c4&apos;, &apos;c5&apos;), show=&quot;headings&quot;,</span><br><span class="line">                        yscrollcommand=scrollBar.set)</span><br><span class="line">        tree.column(&apos;c1&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c2&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c3&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c4&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.column(&apos;c5&apos;, width=200, anchor=&apos;center&apos;)</span><br><span class="line">        tree.heading(&apos;c1&apos;, text=&apos;编号&apos;)</span><br><span class="line">        tree.heading(&apos;c2&apos;, text=&apos;教师编号&apos;)</span><br><span class="line">        tree.heading(&apos;c3&apos;, text=&apos;姓名&apos;)</span><br><span class="line">        tree.heading(&apos;c4&apos;, text=&apos;项目&apos;)</span><br><span class="line">        tree.heading(&apos;c5&apos;, text=&apos;成绩&apos;)</span><br><span class="line">        tree.pack(side=LEFT, fill=Y)</span><br><span class="line">        scrollBar.config(command=tree.yview)</span><br><span class="line">        # 定义并绑定Treeview组件的鼠标单击事件</span><br><span class="line">        def treeviewClick(event):</span><br><span class="line">            pass</span><br><span class="line">        tree.bind(&apos;&lt;Button-1&gt;&apos;, treeviewClick)</span><br><span class="line">        Label(tcwin, text=&quot;已经报名项目以及成绩:&quot;).pack()</span><br><span class="line">        def mydate2():</span><br><span class="line">            pc = mysql(&quot;SELECT * FROM pc&quot;)</span><br><span class="line">            i = 1</span><br><span class="line">            for pc1 in pc:</span><br><span class="line">                if pc1[1] == int(teachername):</span><br><span class="line">                    name = mysql(&quot;SELECT * FROM teacher WHERE tid = &quot; + teachername)</span><br><span class="line">                    xm = mysql(&quot;SELECT * FROM project WHERE pid = &quot; + str(pc1[2]))</span><br><span class="line">                    cj = &quot;&quot;</span><br><span class="line">                    if pc1[4] == 0:</span><br><span class="line">                        cj = &quot;未通过管理员审核&quot;</span><br><span class="line">                    if pc1[4] == 1:</span><br><span class="line">                        cj = pc1[3]</span><br><span class="line">                    tree.insert(&apos;&apos;, i, values=(i, teachername, name[0][1], xm[0][2], cj))</span><br><span class="line">                    i=i+1</span><br><span class="line">        mydate2()</span><br><span class="line">        # 菜单</span><br><span class="line">        menu = Menu(tcwin)</span><br><span class="line">        pro = mysql(&quot;SELECT * FROM project&quot;)</span><br><span class="line">        # fmenu1 = Menu(stuwin)</span><br><span class="line">        # fmenu1.add_command(label=&quot;当前可报项目&quot;)</span><br><span class="line">        fmenu2 = Menu(menu, tearoff=0)</span><br><span class="line">        fmenu3 = Menu(menu, tearoff=0)</span><br><span class="line">        # j=0</span><br><span class="line">        for project in pro:</span><br><span class="line">            fmenu2.add_command(label=project[2], command=lambda x=project[1]: baoming2(x))</span><br><span class="line">            # j=j+1</span><br><span class="line">            # fmenu2.add_separator()</span><br><span class="line">            # Button(stuwin,text = project[2]).place(x = 50, y = 50,width = 60, height = 40)</span><br><span class="line">        fmenu3.add_command(label=&quot;退出登录&quot;, command=restart_program)</span><br><span class="line">        fmenu3.add_command(label=&quot;关闭程序&quot;, command=exit)</span><br><span class="line">        menu.add_cascade(label=&quot;当前可报项目&quot;, menu=fmenu2)</span><br><span class="line">        menu.add_cascade(label=&quot;退出&quot;, menu=fmenu3)</span><br><span class="line">        tcwin[&apos;menu&apos;] = menu</span><br><span class="line">        tcwin.config(menu=menu)</span><br><span class="line">        tcwin.mainloop()</span><br></pre></td></tr></table></figure><h2 id="项目仓库"><a href="#项目仓库" class="headerlink" title="项目仓库"></a>项目仓库</h2><blockquote><p>地址：<a href="https://github.com/zhangao4833/xiaojiyundonghui" target="_blank" rel="noopener">https://github.com/zhangao4833/xiaojiyundonghui</a></p></blockquote><blockquote><p>里面有源码文件，以及数据库文件，还有用pyinstaller对程序进行打包好的exe文件。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;项目说明&quot;&gt;&lt;a href=&quot;#项目说明&quot; class=&quot;headerlink&quot; title=&quot;项目说明&quot;&gt;&lt;/a&gt;项目说明&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;这个项目中还是存在许多的BUG，但由于时间的问题，我只排除了部分会影响操作的BUG（不要和我说优化
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
      <category term="Tkinter" scheme="https://www.imzhangao.com/tags/Tkinter/"/>
    
  </entry>
  
  <entry>
    <title>python爬虫以及Scrapy框架的使用</title>
    <link href="https://www.imzhangao.com/2018/06/18/python%E7%88%AC%E8%99%AB%E4%BB%A5%E5%8F%8AScrapy%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://www.imzhangao.com/2018/06/18/python爬虫以及Scrapy框架的使用/</id>
    <published>2018-06-18T13:18:14.608Z</published>
    <updated>2018-06-18T14:12:53.066Z</updated>
    
    <content type="html"><![CDATA[<h2 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h2><p>百度云盘：<a href="https://pan.baidu.com/s/1ditOInC07pgsYRAMjxUWgA" target="_blank" rel="noopener">链接</a> 密码：fc0l</p><h2 id="爬取腾讯社招首页数据并自动翻页自动保存"><a href="#爬取腾讯社招首页数据并自动翻页自动保存" class="headerlink" title="爬取腾讯社招首页数据并自动翻页自动保存"></a>爬取腾讯社招首页数据并自动翻页自动保存</h2><p>项目仓库：<a href="https://github.com/zhangao4833/A-reptile---a-Tencent-recruit" target="_blank" rel="noopener">A-reptile—a-Tencent-recruit</a></p><h2 id="爬取mzitu-com的首页全部图片并自动翻页自动保存"><a href="#爬取mzitu-com的首页全部图片并自动翻页自动保存" class="headerlink" title="爬取mzitu.com的首页全部图片并自动翻页自动保存"></a>爬取mzitu.com的首页全部图片并自动翻页自动保存</h2><p>项目仓库：<a href="https://github.com/zhangao4833/A-reptile---a-mzitu.com" target="_blank" rel="noopener">A-reptile—a-mzitu.com</a></p><blockquote><p>关于这些项目要注意的地方我都写在了仓库README里面，这里我就不单独一个一个说了，还有这里不定时更新（啥时候写出来一个就更新一个|滑稽.jpg）</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;学习资源&quot;&gt;&lt;a href=&quot;#学习资源&quot; class=&quot;headerlink&quot; title=&quot;学习资源&quot;&gt;&lt;/a&gt;学习资源&lt;/h2&gt;&lt;p&gt;百度云盘：&lt;a href=&quot;https://pan.baidu.com/s/1ditOInC07pgsYRAMjxUWgA&quot;
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
      <category term="Scrapy" scheme="https://www.imzhangao.com/tags/Scrapy/"/>
    
      <category term="爬虫" scheme="https://www.imzhangao.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Gunicorn与Nginx部署Django服务器</title>
    <link href="https://www.imzhangao.com/2018/06/18/Gunicorn%E4%B8%8ENginx%E9%83%A8%E7%BD%B2Django%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>https://www.imzhangao.com/2018/06/18/Gunicorn与Nginx部署Django服务器/</id>
    <published>2018-06-18T08:37:34.331Z</published>
    <updated>2018-06-18T09:31:05.834Z</updated>
    
    <content type="html"><![CDATA[<h2 id="python版本说明"><a href="#python版本说明" class="headerlink" title="python版本说明"></a>python版本说明</h2><p>首先就是python的版本问题，服务器（我的是centos7）会自带一个python版本，我的看了下是2.7.5的版本，因为它用<br>的yum install安装就需要调用python，而我用的本地django环境是python3.x的版本，大家都知道这两个版本有很多<br>东西有点不同，所以我们本地是什么环境，最好在服务器上就是什么环境，避免有一些不必要的错误。</p><h3 id="首先安装python3-x的版本"><a href="#首先安装python3-x的版本" class="headerlink" title="首先安装python3.x的版本"></a>首先安装python3.x的版本</h3><p>这个可以参考大佬的这篇文章：<a href="https://www.cnblogs.com/FZfangzheng/p/7588944.html" target="_blank" rel="noopener">https://www.cnblogs.com/FZfangzheng/p/7588944.html</a><br>里面有详细的安装以及说明，但是在最后创建软连的时候，我是将python直接默认为python3的路径了，这样就不用python3<br>这样的命令了，解决了很多默认就用python调用的问题，但是这样改完之后，使用yum install命令会报错，大家可以根据报<br>错的文件，打开它，将头部的python改为系统默认安装的python2.7.5版本路径。</p><h2 id="Nginx与Gunicorn的安装使用"><a href="#Nginx与Gunicorn的安装使用" class="headerlink" title="Nginx与Gunicorn的安装使用"></a>Nginx与Gunicorn的安装使用</h2><p>这些问题都很简单的，安装Gunicorn和使用,他的帮助文档里面全都有：<br><a href="http://docs.gunicorn.org/en/latest/install.html" target="_blank" rel="noopener">http://docs.gunicorn.org/en/latest/install.html</a></p><p>如果看不懂官方文档的可以参考这篇文档去设置：<a href="https://www.cnblogs.com/nanrou/p/7026802.html" target="_blank" rel="noopener">https://www.cnblogs.com/nanrou/p/7026802.html</a></p><h2 id="django-setting文件"><a href="#django-setting文件" class="headerlink" title="django setting文件"></a>django setting文件</h2><pre><code>在最后加入代码</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &apos;/static/&apos;</span><br><span class="line">STATICFILES_DIRS = (</span><br><span class="line">     os.path.join(BASE_DIR, &apos;static&apos;).replace(&apos;\\&apos;, &apos;/&apos;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><pre><code>在INSTALLED_APPS中把gunicorn加进去，然后其他的就按上面的那篇文档设置就好了。</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;python版本说明&quot;&gt;&lt;a href=&quot;#python版本说明&quot; class=&quot;headerlink&quot; title=&quot;python版本说明&quot;&gt;&lt;/a&gt;python版本说明&lt;/h2&gt;&lt;p&gt;首先就是python的版本问题，服务器（我的是centos7）会自带一个py
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
      <category term="Django" scheme="https://www.imzhangao.com/tags/Django/"/>
    
      <category term="Gunicorn" scheme="https://www.imzhangao.com/tags/Gunicorn/"/>
    
      <category term="Nginx" scheme="https://www.imzhangao.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>梯子安装以及运行出现的问题</title>
    <link href="https://www.imzhangao.com/2018/05/11/%E6%A2%AF%E5%AD%90%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E8%BF%90%E8%A1%8C%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://www.imzhangao.com/2018/05/11/梯子安装以及运行出现的问题/</id>
    <published>2018-05-11T14:26:05.747Z</published>
    <updated>2018-05-11T14:23:50.951Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装SSR"><a href="#安装SSR" class="headerlink" title="安装SSR"></a>安装SSR</h2><p>这个SSR的项目在这里：<a href="https://github.com/shadowsocksr-backup/shadowsocksr" target="_blank" rel="noopener">shadowsocksr</a></p><p>里面安装和运行都有详细的解释</p><blockquote><p>CentOS 安装</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install python-setuptools &amp;&amp; easy_install pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure><blockquote><p>Debian / Ubuntu 安装</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python-pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure><h2 id="使用SSR"><a href="#使用SSR" class="headerlink" title="使用SSR"></a>使用SSR</h2><blockquote><p>前台运行</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssserver -p 443 -k password -m aes-256-cfb</span><br></pre></td></tr></table></figure><blockquote><p>后台运行</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ssserver -p 443 -k password -m aes-256-cfb --user nobody -d start</span><br></pre></td></tr></table></figure><blockquote><p>停止后台运行</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ssserver -d stop</span><br></pre></td></tr></table></figure><blockquote><p>检查日志</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo less /var/log/shadowsocks.log</span><br></pre></td></tr></table></figure><blockquote><p>前台停止运行用Ctrl+c就可以了，还有一种配置文件的运行方法，感兴趣的可以去上面的网址看看。</p></blockquote><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><blockquote><p>首先，新买的服务器安装后服务器打开但是客服端连不上，这些问题作者在文档里面说的也很清楚。</p></blockquote><blockquote><p> 新买的服务器是没有开启端口的，也就是说防火墙没有把你ssr要用的端口（例如443）打开</p></blockquote><blockquote><p>centos7版本对防火墙进行 加强,不再使用原来的iptables,启用firewall</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-ports            查看已开放的端口(默认不开放任何端口)</span><br><span class="line">firewall-cmd --zone=public(作用域) --add-port=80/tcp(端口和访问类型) --permanent(永久生效)           开启80端口</span><br><span class="line">firewall-cmd --reload                  重启防火墙</span><br><span class="line">systemctl stop firewalld.service            停止防火墙</span><br><span class="line">systemctl disable firewalld.service               禁止防火墙开机启动</span><br><span class="line">firewall-cmd --zone= public --remove-port=80/tcp --permanent           删除</span><br></pre></td></tr></table></figure><blockquote><p>centos7以下版本</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">开放80，22，8080 端口</span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 22 -j ACCEPT</span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 8080 -j ACCEPT</span><br><span class="line">/etc/rc.d/init.d/iptables save           保存</span><br><span class="line">/etc/init.d/iptables status                 查看打开的端口</span><br><span class="line">chkconfig iptables on 开启防火墙 永久性生效，重启后不会复原</span><br><span class="line">chkconfig iptables off 关闭防火墙 永久性生效，重启后不会复原</span><br><span class="line">service iptables start  开启防火墙 即时生效，重启后复原</span><br><span class="line">service iptables stop   关闭防火墙 即时生效，重启后复原</span><br></pre></td></tr></table></figure><blockquote><p>选择上面合适的命令将你ssr需要的端口打开</p></blockquote><blockquote><p>打开后重启一下防火墙（firewall-cmd –reload），然后在重启一下服务器（shutdown -r now）</p></blockquote><blockquote><p>然后运行ssr</p></blockquote><blockquote><p>然后先在服务器检测一下端口打开了没（firewall-cmd –list-ports），如果出现你ssr设置的端口说明打开了，如果什么都没有说明没有打开，那你上面的步骤可能有错检查后重新来一遍。</p></blockquote><blockquote><p>服务器检测完后，再在本地检测一下，大家可以去百度一个工具tcping.exe，这个工具可以让我们ping目标IP的端口，下载下来后放在电脑盘的根目录，然后在此目录按住shift点击右键，在出现的菜单中选中’在此处打开命令窗口’这个选项，然后输入</p></blockquote><blockquote><p>tcping IP地址 端口</p></blockquote><blockquote><p>返回 No response 为端口关闭，返回 Port is open 为端口打开状态</p></blockquote><blockquote><p>端口为打开状态时，你就可以用你的ssr客户端链接了，客户端请在上面网址里面去下载，Windows，Android，OS X，iOS都有。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装SSR&quot;&gt;&lt;a href=&quot;#安装SSR&quot; class=&quot;headerlink&quot; title=&quot;安装SSR&quot;&gt;&lt;/a&gt;安装SSR&lt;/h2&gt;&lt;p&gt;这个SSR的项目在这里：&lt;a href=&quot;https://github.com/shadowsocksr-backu
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="ssr" scheme="https://www.imzhangao.com/tags/ssr/"/>
    
  </entry>
  
  <entry>
    <title>HEXO安装hexo-helper-live2d插件遇到的问题</title>
    <link href="https://www.imzhangao.com/2018/05/06/HEXO%E5%AE%89%E8%A3%85hexo-helper-live2d%E6%8F%92%E4%BB%B6%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://www.imzhangao.com/2018/05/06/HEXO安装hexo-helper-live2d插件遇到的问题/</id>
    <published>2018-05-06T13:20:29.073Z</published>
    <updated>2018-05-06T13:19:04.036Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><blockquote><p>hexo-helper-live2d 是一个HEXO的插件，俗称2D面板娘，它的github地址在这里大家可以去看看：<a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" rel="noopener">hexo-helper-live2d</a>,里面有它的安装方法和一些设置。</p></blockquote><blockquote><p>在你的网站中如果有使用lunr的话，那么在用npm install安装，不管是安装它的环境还是面板娘的模型都会出现安装后本地调试的时候出现找不到lunr的错误提示，但是你的本地网页是能打开的，面板娘也是能正确显示的，但网站里面的搜索用不了了，这就是lunr找不到引发的问题。</p></blockquote><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>首先我用对比看了下安装后改了哪些文件，对比后发现，少了两个关键的文件夹。</p><p><img src="/img/2d-nodejieba.png"></p><p><img src="/img/2d-lunr.png"></p><p>这两个文件夹就是关键，在用npm install的时候自动把它们删除了，我也不知道为什么，你把它备份一份然后安装后又copy回去就好了。</p><p>还有在 package-lock.json 文件中关于那两个文件夹的内容也被删除了，但是你在把文件夹copy回去然后本地调试的时候应该会自动生成的，如果没有生成，你就把少的内容自己再copy回去。</p><p><img src="/img/2d-nodejieba-json.png"></p><p><img src="/img/2d-lunr-json.png"></p><h2 id="下面这个算是优化"><a href="#下面这个算是优化" class="headerlink" title="下面这个算是优化"></a>下面这个算是优化</h2><blockquote><p>如果你的网页在安装了2d面板娘后，发现在网页加载的时候2d娘加载的一瞬间你的网站动画会一卡一卡的，这就要改一下2d面板娘加载的时间了。</p></blockquote><blockquote><p>在文件 HEXO根目录\node_modules\hexo-helper-live2d\index.js 将这一句代码</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const scriptToInject = `L2Dwidget.init($&#123;JSON.stringify(config)&#125;);`;</span><br></pre></td></tr></table></figure><p>改为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const scriptToInject = `setTimeout(function ()&#123;L2Dwidget.init($&#123;JSON.stringify(config)&#125;)&#125;, 1500);`;</span><br></pre></td></tr></table></figure></p><p>这主要就是给它的加载设置了个1.5s的延时，这样就能错开它与网站动画加载的时间，就不会一卡一卡的了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;问题&quot;&gt;&lt;a href=&quot;#问题&quot; class=&quot;headerlink&quot; title=&quot;问题&quot;&gt;&lt;/a&gt;问题&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;hexo-helper-live2d 是一个HEXO的插件，俗称2D面板娘，它的github地址在这里大家可以去看
      
    
    </summary>
    
      <category term="HEXO" scheme="https://www.imzhangao.com/categories/HEXO/"/>
    
    
      <category term="HEXO" scheme="https://www.imzhangao.com/tags/HEXO/"/>
    
      <category term="live2d" scheme="https://www.imzhangao.com/tags/live2d/"/>
    
  </entry>
  
  <entry>
    <title>Python  Socket+Django简单的视频流</title>
    <link href="https://www.imzhangao.com/2018/05/05/Python%20%20Socket+Django%E7%AE%80%E5%8D%95%E7%9A%84%E8%A7%86%E9%A2%91%E6%B5%81/"/>
    <id>https://www.imzhangao.com/2018/05/05/Python  Socket+Django简单的视频流/</id>
    <published>2018-05-05T13:20:10.533Z</published>
    <updated>2018-05-05T14:07:26.758Z</updated>
    
    <content type="html"><![CDATA[<h2 id="服务端关键源码"><a href="#服务端关键源码" class="headerlink" title="服务端关键源码"></a>服务端关键源码</h2><blockquote><p>网页端</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$.get(&quot;http://127.0.0.1:8000/blog/img/&quot;,function(data,status)&#123;</span><br><span class="line">    /**,&#123;ZT_arr : &apos;1&apos;&#125;**/</span><br><span class="line">  &#123;#  alert(&quot;链接完成···&quot;);#&#125;</span><br><span class="line">  &#123;#alert(&quot;Data: &quot; + data + &quot;\nStatus: &quot; + status);#&#125;</span><br><span class="line">  &#123;#alert($(data).find(&quot;img#img1&quot;)[0].src);#&#125;</span><br><span class="line">   $(&apos;#p1&apos;).html($(data).find(&quot;p#p1&quot;).Text);</span><br><span class="line">   $(&apos;#p2&apos;).html($(data).find(&quot;p#p2&quot;).Text);</span><br><span class="line">  $(&quot;#img1&quot;).attr(&apos;src&apos;,$(data).find(&quot;img#img1&quot;)[0].src);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>后台端</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def img(request):</span><br><span class="line">    serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    host = socket.gethostname()</span><br><span class="line">    port = 9999</span><br><span class="line">    serversocket.bind((host, port))</span><br><span class="line">    serversocket.listen(5)</span><br><span class="line">    arr, arr2 = serversocket.accept()</span><br><span class="line">    arrs = arr.recv(999999)</span><br><span class="line">    arr.close()</span><br><span class="line">    imgStr = arrs.decode(&apos;utf-8&apos;)</span><br><span class="line">    imgStr = &apos;data:image/jpeg;base64,&apos;+imgStr</span><br><span class="line">    return render(request,&apos;blog/echo_img.html&apos;,&#123;&apos;arr1&apos;:arr2[0],&apos;arr2&apos;:arr2[1],&apos;imgStr&apos;:imgStr&#125;)</span><br></pre></td></tr></table></figure><h2 id="客户端关键源码"><a href="#客户端关键源码" class="headerlink" title="客户端关键源码"></a>客户端关键源码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">import sys</span><br><span class="line">import demjson</span><br><span class="line">import re</span><br><span class="line">import base64</span><br><span class="line">from io import BytesIO</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line">from PIL import Image,ImageGrab,ImageTk</span><br><span class="line">def lianjie():</span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    host = socket.gethostname()</span><br><span class="line">    port = 9999</span><br><span class="line"></span><br><span class="line">    s.connect((host, port))</span><br><span class="line">    return s</span><br><span class="line"></span><br><span class="line">def hqpm():</span><br><span class="line">    im = ImageGrab.grab()</span><br><span class="line"></span><br><span class="line">    jpeg_image_buffer = BytesIO()</span><br><span class="line">    im.save(jpeg_image_buffer, format=&quot;JPEG&quot;)</span><br><span class="line">    imgStr = base64.b64encode(jpeg_image_buffer.getvalue())</span><br><span class="line">    print(imgStr)</span><br><span class="line">    return imgStr</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    while True:</span><br><span class="line">        s = lianjie()</span><br><span class="line">        imgStr = hqpm()</span><br><span class="line">        s.send(imgStr)</span><br><span class="line">        time.sleep(0.2)</span><br><span class="line">        s.close()</span><br></pre></td></tr></table></figure><h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="/img/shipinliu-xiaoguo.png"></p><blockquote><p> 这就是这个视频流的全部关键代码了，我说下简单的原理，就是利用客服端在电脑上死循环截屏然后发送到服务端，服务端<br>用一个Ajax来死循环刷新网页的部分内容，这部分内容就是后台Django接收的客服端的图片信息，这样就能在网页上简单的显<br>示一个无限刷新的图片（约等于视频），但是有个缺点还没有改正，这个网页刷新的时间间隔只能是200毫秒，再短一点就会出<br>现端口冲突，但这200毫秒不能缩短是致命的，在我们人眼里看起来就和PPT快差不多了，这个问题要等到后面植入其他东西来<br>优化，或者直接换一种方法也行。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;服务端关键源码&quot;&gt;&lt;a href=&quot;#服务端关键源码&quot; class=&quot;headerlink&quot; title=&quot;服务端关键源码&quot;&gt;&lt;/a&gt;服务端关键源码&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;网页端&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
      <category term="Django" scheme="https://www.imzhangao.com/tags/Django/"/>
    
      <category term="Socket" scheme="https://www.imzhangao.com/tags/Socket/"/>
    
  </entry>
  
  <entry>
    <title>教你玩不一样的微信跳一跳小游戏</title>
    <link href="https://www.imzhangao.com/2018/04/30/%E6%95%99%E4%BD%A0%E7%8E%A9%E4%B8%8D%E4%B8%80%E6%A0%B7%E7%9A%84%E5%BE%AE%E4%BF%A1%E8%B7%B3%E4%B8%80%E8%B7%B3%E5%B0%8F%E6%B8%B8%E6%88%8F/"/>
    <id>https://www.imzhangao.com/2018/04/30/教你玩不一样的微信跳一跳小游戏/</id>
    <published>2018-04-30T15:29:23.213Z</published>
    <updated>2018-04-30T09:18:14.961Z</updated>
    
    <content type="html"><![CDATA[<p>首先这个程序是用python写的，那么肯定第一步就是安装python的环境了，python官网给我们提供了两个下载的版本，我们下载python2.7.x的版本。</p><p>下载下来安装就好，然后就是配置python的环境变量，我们要用到python的pip来安装程序的相关依赖，所以我们配置环境变量时要将pip的文件夹也配置进去，<br>将python的安装目录以及pip目录（scripts）全部放在path环境变量中就好了。</p><p>安装adb的驱动adb drvier下载下来安装就好，它的安装路径也要放在path环境变量下。</p><p>然后将数据线连到手机，手机点开应用调试，并且将开发者选项中的允许模拟点击打开，然后电脑运行cmd输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br></pre></td></tr></table></figure></p><p>此时手机会弹出是否允许调试，点击时，你就会在命令窗口看见你的手机编号。</p><p>上面的都完成后，去GitHub下载这个程序，地址：<a href="https://github.com/wangshub/wechat_jump_game" target="_blank" rel="noopener"> 微信跳一跳</a></p><p>下载后解压出来，在他的目录下打开cmd，然后输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure></p><p>这个安装时间有点长，请耐心等待。</p><p>安装完成后在config里面找到自己的手机尺寸然后点进去，里面有个文件，外面有几个手机信号的文件夹，里面也有相同的文件，将你机型的文件替换到你屏幕尺寸的文件里面，就好了，没有你的机型的话就不要动，或者说你可以自己改改参数。</p><p>然后跳转到文件根目录，手机连上电脑，打开微信跳一跳，点击开始，然后在文件根目录打开cmd，输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python wechat_jump_auto.py</span><br></pre></td></tr></table></figure></p><p>他会提示你是否adb有手机连入了，你输入y就开始自己玩了。<br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先这个程序是用python写的，那么肯定第一步就是安装python的环境了，python官网给我们提供了两个下载的版本，我们下载python2.7.x的版本。&lt;/p&gt;
&lt;p&gt;下载下来安装就好，然后就是配置python的环境变量，我们要用到python的pip来安装程序的相
      
    
    </summary>
    
      <category term="Python" scheme="https://www.imzhangao.com/categories/Python/"/>
    
    
      <category term="Python" scheme="https://www.imzhangao.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>如何优雅的装B--hydra</title>
    <link href="https://www.imzhangao.com/2018/04/30/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%A3%85B--hydra/"/>
    <id>https://www.imzhangao.com/2018/04/30/如何优雅的装B--hydra/</id>
    <published>2018-04-30T15:29:23.212Z</published>
    <updated>2018-04-30T08:59:00.455Z</updated>
    
    <content type="html"><![CDATA[<p>既然都说了要优雅的装逼，那当然要装的像一点。</p><p>首先我们来介绍下hydra:</p><p>海德拉（Hydra）：希腊神话中的九头蛇，是西方的神话生物，在古希腊神话中出现最为频繁。传说它拥有九颗头，其中一颗头要是被斩断，立刻又会生出两颗头来。赫拉克勒斯运用他的智慧，成功地击败了巨大水蛇海德拉。</p><p>当然这介绍和我们要说的软件没有太大的联系，百度也没有介绍，大家要想去看看介绍的话可以点击访问他们的<a href="https://www.thc.org/" target="_blank" rel="noopener">官网</a>。</p><p>THC-HYDRA是一个支持多种网络服务的非常快速的网络登陆破解工具。这个工具是一个验证性质的工具，它被设计的主要目的是为研究人员和安全从业人员展示远程获取一个系统的认证权限是比较容易的！</p><p>我这里要做的只是演示一遍它的安装以及用法。</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>首先我们的环境为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">centos 6.0</span><br></pre></td></tr></table></figure><p>用的阿里的服务器。</p><p>首先先下载要用到的文件:</p><p><a href="http://pan.baidu.com/s/1pLwWU6Z" target="_blank" rel="noopener">hydra</a>密码：hm6k</p><p><a href="http://pan.baidu.com/s/1kUYc7Kr" target="_blank" rel="noopener">libssh</a>密码：54ks</p><p>我们用的是xshell连接的我们的服务器，可以去百度下载。</p><p><img src="/img/11-4-1.png"></p><p>首先我们先连接上服务器，然后为了方便上传文件先安装rzsz</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y lrzsz</span><br><span class="line">rz</span><br></pre></td></tr></table></figure><p>上传两个文件</p><p><img src="/img/11-4-2.png"></p><p>然后分别解压它们</p><p><img src="/img/11-4-3.png"><br><img src="/img/11-4-4.png"></p><p>进入libssh目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd libssh-0.4.8</span><br></pre></td></tr></table></figure><p>创建文件夹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir build</span><br><span class="line"></span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Debug -DWITH_SSH1=ON ..</span><br></pre></td></tr></table></figure><p>在执行cmake的时候可能会报错（我用的阿里云的官方系统里面啥都没安装）</p><p>错误提示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-bash: cmake: command not found</span><br></pre></td></tr></table></figure><p>解决方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++ make automake </span><br><span class="line"></span><br><span class="line">yum install -y wget</span><br><span class="line"></span><br><span class="line">wget http://www.cmake.org/files/v2.8/cmake-2.8.10.2.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf cmake-2.8.10.2.tar.gz</span><br><span class="line"></span><br><span class="line">cd cmake-2.8.10.2</span><br><span class="line"></span><br><span class="line">./bootstrap</span><br><span class="line"></span><br><span class="line">gmake</span><br><span class="line"></span><br><span class="line">gmake install</span><br></pre></td></tr></table></figure><p>执行完后在执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Debug -DWITH_SSH1=ON ..</span><br></pre></td></tr></table></figure><p>可能还会报错，我把这几个错误一起放在下面</p><p>错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CMake Error at cmake/Modules/FindZLIB.cmake:76 (message):</span><br><span class="line">  Could not find ZLIB</span><br><span class="line">Call Stack (most recent call first):</span><br><span class="line">  CMakeLists.txt:47 (find_package)</span><br></pre></td></tr></table></figure><p>解决方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install zlib-devel</span><br></pre></td></tr></table></figure><p>错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CMake Error at CMakeLists.txt:59 (message):</span><br><span class="line">  Could not find OpenSSL or GCrypt</span><br></pre></td></tr></table></figure><p>解决方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -f CMakeCache.txt</span><br><span class="line">yum -y install ncurses-devel</span><br><span class="line">yum install openssl-devel</span><br></pre></td></tr></table></figure><p>然后基本执行下面这条语句就不会报错了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Debug -DWITH_SSH1=ON ..</span><br></pre></td></tr></table></figure><p>成功后执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>这样libssh就安装好了，下面安装hydra</p><p>进入hydra的目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd hydra-6.3-src</span><br></pre></td></tr></table></figure><p>执行下面的指令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>安装完成了，下面我们要开始装B了</p><p>首先准备好两个文件，一个放用户名的username.txt一个放密码的password.txt</p><p>我就用自己的服务器做实验了，密码文件里有正确的密码</p><p>用户名文件里放一个root就好</p><p><img src="/img/11-4-5.png"></p><p>然后上传到服务器执行指令</p><p><img src="/img/11-4-7.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -L username.txt -P password.txt -t 1 -vV -e ns IP ssh</span><br></pre></td></tr></table></figure><p>然后等待一会就能爆破成功了</p><p><img src="/img/11-4-6.png"></p><p>它还有很多的爆破协议，我就就只示范这一种就好了</p><p>大家有兴趣可以去尝试其他几种</p><p>好了装B结束</p><p><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;既然都说了要优雅的装逼，那当然要装的像一点。&lt;/p&gt;
&lt;p&gt;首先我们来介绍下hydra:&lt;/p&gt;
&lt;p&gt;海德拉（Hydra）：希腊神话中的九头蛇，是西方的神话生物，在古希腊神话中出现最为频繁。传说它拥有九颗头，其中一颗头要是被斩断，立刻又会生出两颗头来。赫拉克勒斯运用他的智
      
    
    </summary>
    
      <category term="随笔记" scheme="https://www.imzhangao.com/categories/%E9%9A%8F%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Hacker series" scheme="https://www.imzhangao.com/tags/Hacker-series/"/>
    
  </entry>
  
  <entry>
    <title>去掉迅雷9的右半边浏览器</title>
    <link href="https://www.imzhangao.com/2018/04/30/%E5%8E%BB%E6%8E%89%E8%BF%85%E9%9B%B79%E7%9A%84%E5%8F%B3%E5%8D%8A%E8%BE%B9%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    <id>https://www.imzhangao.com/2018/04/30/去掉迅雷9的右半边浏览器/</id>
    <published>2018-04-30T15:29:23.211Z</published>
    <updated>2018-04-30T09:07:42.638Z</updated>
    
    <content type="html"><![CDATA[<p>都知道下载神器迅雷，但是迅雷出了一个9，他的左半边是下载的界面，右半边完全是一个浏览器，官方解释说这样是为了大家更方便下载资源，但是右边的浏览器有时候会自动播放视频等一些广告，还有就是加上浏览器后，他的面积也变大了。对于一个下载器来说这些功能似乎有点多余了。好了下面教大家如何去掉迅雷9的右半边浏览器。</p><p>首先下载迅雷9，大家可以去它的官网下载：<a href="http://xl9.xunlei.com/" target="_blank" rel="noopener">迅雷9</a></p><p>下载完成后，正常安装就好。</p><p>安装完成后我们去他的安装目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\Program Files (x86)\Thunder Network\Thunder9\Thunder\Xar</span><br></pre></td></tr></table></figure></p><p><img src="/img/2017-11-24-1.png"></p><p>把这个目录下的这个文件复制两份，一份到桌面，一份保存起来</p><p>然后下载这个文件<a href="https://pan.baidu.com/s/1c1BXwrQ" target="_blank" rel="noopener">JXar</a>密码: meiw</p><p>下载完成后打开，将刚才复制到桌面的文件拖动到这个软件里面，然后点击Unpack，就会在桌面生成一个文件夹</p><p><img src="/img/2017-11-24-2.png"></p><p>然后进入生成的文件夹，依次点开下面的文件</p><p><img src="/img/2017-11-24-3.png"> </p><p><img src="/img/2017-11-24-4.png"> </p><p>最后点开mainwnd文件</p><p>将选中的这一块区域删除</p><p><img src="/img/2017-11-24-5.png"> </p><p>将这个1235修改为363</p><p><img src="/img/2017-11-24-6.png"></p><p>然后保存退出</p><p>再打开JXar软件，将这个文件夹拖进去，将右边两个选项依次选着7和7.9，然后将桌面刚开始复制出来的ThunderCore.xar删除，点击pack，桌面就会生成一个ThunderCore.xar文件，用这个文件替换它安装目录的那个文件，最后打开迅雷9</p><p><img src="/img/2017-11-24-7.png"></p><p><img src="/img/2017-11-24-8.png"></p><p>拖动这个边缘就会缩小，最后就会缩小为这个样子</p><p><img src="/img/2017-11-24-9.png"></p><p>这个样子是打不开设置的，如果要打开设置就将刚开始保存的那一份文件替换回来就可以打开了</p><p><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;都知道下载神器迅雷，但是迅雷出了一个9，他的左半边是下载的界面，右半边完全是一个浏览器，官方解释说这样是为了大家更方便下载资源，但是右边的浏览器有时候会自动播放视频等一些广告，还有就是加上浏览器后，他的面积也变大了。对于一个下载器来说这些功能似乎有点多余了。好了下面教大家如
      
    
    </summary>
    
      <category term="随笔记" scheme="https://www.imzhangao.com/categories/%E9%9A%8F%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="迅雷" scheme="https://www.imzhangao.com/tags/%E8%BF%85%E9%9B%B7/"/>
    
  </entry>
  
  <entry>
    <title>js在Cookie中取值乱码问题</title>
    <link href="https://www.imzhangao.com/2018/04/30/js%E5%9C%A8cookie%E4%B8%AD%E5%8F%96%E5%80%BC%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/"/>
    <id>https://www.imzhangao.com/2018/04/30/js在cookie中取值乱码问题/</id>
    <published>2018-04-30T15:29:23.210Z</published>
    <updated>2018-04-30T08:48:16.710Z</updated>
    
    <content type="html"><![CDATA[<p>假设服务器端设置了变量CookieTest,然后通过UrlEncode编码为 utf-8</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CookieTest = HttpUtility.UrlEncode(CookieTest, System.Text.Encoding.UTF8);</span><br></pre></td></tr></table></figure><p>然后将 CookieTest 存入到cookie中</p><p>在前端界面里面，用JavaScript取到cookie中CookieTest的值，然后用 decodeURI 解码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CookieTest = <span class="built_in">decodeURI</span>(CookieTest);</span><br></pre></td></tr></table></figure><p>最后得到的这个CookieTest值就是你从服务器端传过来的值</p><p><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;假设服务器端设置了变量CookieTest,然后通过UrlEncode编码为 utf-8&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;lin
      
    
    </summary>
    
      <category term="JavaScript" scheme="https://www.imzhangao.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="https://www.imzhangao.com/tags/JavaScript/"/>
    
      <category term="Cookie" scheme="https://www.imzhangao.com/tags/Cookie/"/>
    
  </entry>
  
</feed>
